/*
 This code may be used internally to Travelocity without limitation,
 exclusion, or restriction.  If this code is used externally the
 following comment must be included everywhere this code is used.
 */

/***********************************************************************
 This is written by Austin Cheney on 7 May 2009.  Anybody may use this
 code without permission so long as this comment exists verbatim in each
 instance of its use.

 http://www.travelocity.com/
 http://mailmarkup.org/
 http://prettydiff.com/
 **********************************************************************/
 var markupmin=function(g){var d=0,k=(typeof g.source==="string")?g.source.split(""):"Error: no content supplied to markup.",e=(g.comments!=="comments"&&g.comments!=="beautify"&&g.comments!=="diff")?"":g.comments,l=(g.presume_html===true)?true:false,c=(g.top_comments===true)?true:false,b=function(){var i=0,n=[],m=k.length;for(i=d;i<m;i+=1){if(k[i]===">"){break}else{n.push(k[i]);k[i]=""}}d=i;k[d]=n.join("").replace(/\s+/g," ").replace(/\s*,\s+/g,", ").replace(/\s*\/\s*/g,"/").replace(/\s*=\s*/g,"=").replace(/ \="/g,'="').replace(/ \='/g,"='")+">"},a=function(){var m=k.length,i=0,n=[];for(i=d;i<m;i+=1){if(k[i]==="-"&&k[i+1]==="-"&&k[i+2]===">"){k[i]="";k[i+1]="";k[i+2]="";d=i+2;break}else{if(e==="beautify"||e==="comments"){n.push(k[i])}k[i]=""}}if(e==="comments"||e==="beautify"){k[d]=" "+n.join("")+"-->"}},h=function(C){var B=0,A=[],x=0,v="",t="",s="</"+C,q="",n=k.length,i=(/^(\s*\/+<!\[+[A-Z]+\[+)/),r=(/(\/+\]+>\s*)$/),p=(/^(\s*<\!\-\-)/),u=(/(\/+\-\->\s*)$/),w="",o="",D=g.source;if(typeof jsmin!=="function"){return}for(B=d;B<n;B+=1){if((D.slice(B,B+s.length)).toLowerCase()===s){x=B;break}}for(B=d;B<x;B+=1){if(k[B-1]!==">"){A.push(k[B]);k[B]=""}else{break}}q=A[0];A.splice(0,1);if((/\s/).test(A[0])){A.splice(0,1)}for(x;x<n;x+=1){if(k[x]!==">"){t=t+k[x];k[x]=""}else{break}}t=t+">";d=x;if(A.join("")===""){k[d]=q+t;return}v=A.join("");if(e!=="beautify"){if(i.test(v)){w=v.match(i)[0];v=v.replace(i,"")}else{if(p.test(v)){w=v.match(p)[0];v=v.replace(p,"")}}if(r.test(v)){o=v.match(r)[0];v=v.replace(r,"")}else{if(u.test(v)){o=v.match(u)[0];v=v.replace(u,"")}}if(C==="style"){v=w+jsmin({source:v,level:3,type:"css",alter:true,fcomment:c})+o}else{v=w+jsmin({source:v,level:2,type:"javascript",alter:true,fcomment:c})+o}}n=v.length;for(B=0;B<n;B+=1){if((/\s/).test(v.charAt(B))){v=v.substr(B+1)}else{break}}k[d]=q+v+t},j=function(n){var o=k.length,m=0,i=[],p=0;for(p=d;p<o;p+=1){if(k[p-1]+k[p]===n){break}}for(m=d;m<p;m+=1){i.push(k[m]);k[m]=""}k[d]=i.join("");d=p},f=function(){var n=k.length,m=0,i=[];for(m=d;m<n;m+=1){if(k[m]==="<"){break}else{i.push(k[m]);k[m]=""}}d=m-1;k[d]=i.join("").replace(/\s+/g," ")};(function(){var m=[],i=0,p=k.length,n="",o=g.source;for(d=0;d<k.length;d+=1){if((o.slice(d,d+7)).toLowerCase()==="<script"){m=[];for(i=d+8;i<p;i+=1){if(o.charAt(i)===">"){break}m.push(o.charAt(i))}n=m.join("").toLowerCase().replace(/'/g,'"');if(e!=="beautify"&&e!=="diff"){b()}if(n.indexOf('type="')===-1||n.indexOf('type="text/javascript"')!==-1||n.indexOf('type="application/javascript"')!==-1||n.indexOf('type="application/x-javascript"')!==-1||n.indexOf('type="text/ecmascript"')!==-1||n.indexOf('type="application/ecmascript"')!==-1){h("script")}}else{if((o.slice(d,d+6)).toLowerCase()==="<style"){m=[];for(i=d+7;i<p;i+=1){if(o.charAt(i)===">"){break}m.push(o.charAt(i))}n=m.join("").toLowerCase().replace(/'/g,'"');if(e!=="beautify"&&e!=="diff"){b()}if(n.indexOf('type="')===-1||n.indexOf('type="text/css"')!==-1){h("style")}}else{if(o.slice(d,d+4)==="<!--"&&k[d+4]!=="#"){a()}else{if(o.slice(d,d+5)==="<?php"){j("?>")}else{if(o.slice(d,d+2)==="<%"){j("%>")}else{if((k[d]==="<"&&k[d+1]!=="!")||(k[d]==="<"&&k[d+1]==="!"&&k[d+2]!=="-")){b()}else{if(k[d]===undefined){k[d]=""}else{if(k[d-1]!==undefined&&k[d-1].charAt(k[d-1].length-1)===">"){f()}}}}}}}}}}());return(function(){var v=0,u=[],t=false,s=0,q=0,p="",n=[],m=k.length,o=["area","base","basefont","br","col","embed","eventsource","frame","hr","img","input","keygen","link","meta","param","progress","source","wbr"],r=o.length;for(v=0;v<m;v+=1){if(k[v]!==""){n.push(k[v])}}k=[];m=n.length;for(v=0;v<m;v+=1){t=(/^\s+$/).test(n[v]);if(!t||(t&&!(/^\s+$/).test(n[v+1]))){k.push(n[v])}}m=k.length;for(v=2;v<m;v+=1){t=false;if(l===true){u=[];q=k[v].length;for(s=1;s<q;s+=1){if(/[a-z]/i.test(k[v].charAt(s))){u.push(k[v].charAt(s))}else{break}}for(s=0;s<r;s+=1){if(u.join("")===o[s]&&k[v].charAt(0)==="<"){t=true;break}}}if((/^\s+$/).test(k[v-1])){if(!t&&(k[v].charAt(0)==="<"&&k[v].charAt(1)==="/"&&k[v-1]!==" "&&k[v-2].charAt(0)==="<"&&k[v-2].charAt(1)==="/"&&k[v-3].charAt(0)!=="<")&&(k[v].charAt(0)==="<"&&k[v].charAt(k[v].length-2)!=="/")&&(k[v].charAt(0)==="<"&&k[v].charAt(k[v].length-2)!=="/"&&k[v-2].charAt(0)==="<"&&k[v-2].charAt(1)==="/")){k[v-1]=""}}}p=k.join("").replace(/-->\s+/g,"--> ").replace(/\s+<\?php/g," <?php").replace(/\s+<%/g," <%").replace(/\s*>\s+/g,"> ").replace(/\s+<\s*/g," <").replace(/\s+\/>/g,"/>").replace(/\s+>/g,">");if((/\s/).test(p.charAt(0))){p=p.slice(1,p.length)}return p}())};