<!DOCTYPE html>
<html lang="en">
  <head>
    <title>36: CSS static and relative positioning - Dev.Opera</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="google-site-verification" content="L7q_7GF5c9d7ZAUYdfaTiRaB6sTAGv_cRz3nq5DsabM">
    <meta name="description" content="Dev.Opera is the ultimate source of distilled knowledge for web developers, covering the latest open web technologies and techniques including HTML5, CSS3, JavaScript, SVG, optimizing content for mobiles, tablets and TVs, and creating add-ons such as extensions and themes for the Opera browser.">
    <meta name="keywords" content="Opera, web, HTML5, HTML, CSS3, CSS, JavaScript, SVG, Geolocation, Widgets, Extensions, Unite, Mini, Mobile, web development, design, web design, tutorials, articles, examples, demos, web standards, open standards, open web, video, audio, getusermedia, accessibility, wai-aria, transitions, translations, microformats, microdata, dataset, media queries, viewport, @viewport, transparency, opacity, gradients, box-shadow, text-shadow, web fonts, appcache, websql, local storage, ajax, json, games, userjs, webgl, tv, tablet, emulator, skinning, themes, skins, drasgonfly, mathml, web sockets, operawatir">
    <link rel="icon" href="../../../../static.myopera.com/dev/img/speed_dial-icon.png" type="image/png">
    <link rel="apple-touch-icon" href="../../../../static.myopera.com/dev/img/touch-icon.png" type="image/png">
    <link rel="shortcut icon" href="../../../favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="../../../../static.myopera.com/dev/css/devopera.css" type="text/css">
    <!--[if IE 6]><link rel="stylesheet" href="/css/browsers/ie6.css" type="text/css"><![endif]-->
    <!--[if IE 7]><link rel="stylesheet" href="/css/browsers/ie7.css" type="text/css"><![endif]-->
    <!--[if IE 8]><link rel="stylesheet" href="/css/browsers/ie8.css" type="text/css"><![endif]-->
    <!--[if lte IE 8]><script type="text/javascript" src="/js/ie.js"></script><![endif]-->
    <link rel="stylesheet" href="../../../../static.myopera.com/dev/css/articles.css">
    <link rel="stylesheet" media="print" href="../../../../static.myopera.com/dev/css/print.css">
    <link rel="stylesheet" href="../../../../static.myopera.com/dev/css/github.css">
    <link rel="alternate" type="application/rss+xml" title="Recent articles - RSS 2.0 Feed" href="../../../feeds/rss/articles">
    <link rel="alternate" type="application/atom+xml" title="Recent articles - Atom 1.0 Feed" href="../../../feeds/atom/articles">
    <link rel="alternate" type="application/rss+xml" title="Recent articles in Web - RSS 2.0 Feed" href="../../../feeds/rss/articles/web">
    <link rel="alternate" type="application/atom+xml" title="Recent articles in Web - Atom 1.0 Feed" href="../../../feeds/atom/articles/web">
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script type="text/javascript" src="../../../../static.myopera.com/dev/js/menu.js"></script>
    <noscript>
      <style type="text/css">
.collection ul li ul {
    display: inherit !important;
}
      </style>
    </noscript>
    <script type="text/javascript">
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-4118503-4']);
_gaq.push(['_gat._anonymizeIp']);
_gaq.push(['_trackPageview']);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();
    </script>

  </head>
  <body class="web">
    <header role="banner"  class="article-view" >
      <div>
        <a href="../../../index.html" id="logo">Dev.Opera</a>
        <form action="http://dev.opera.com/search" role="search">
          <fieldset>
            <label class="hidden" for="q">Search</label>
            <input type="text" name="q" maxlength="256" value="" id="q" required>
            <input type="submit" id="q-submit" value="Search" title="Search">
          </fieldset>
        </form>
        <p id="login">
          <a href="../../../../../https/dev.opera.com/login/index.html" accesskey="L" title="Log in">Log in</a>
        </p>
        <nav id="nav">
          <ul role="menu">

            <li role="menuitem"  class="selected">
              <a href="../../../web.html">Web</a>
            </li>
            <li role="menuitem" >
              <a href="../../../addons.1.html">Add-ons</a>
            </li>
            <li role="menuitem" >
              <a href="../../../mobile.html">Mobile</a>
            </li>
            <li role="menuitem" >
              <a href="../../../tv.html">TV</a>
            </li>
            <li role="menuitem" >
              <a href="../../../labs.html">Labs</a>
            </li>
          </ul>
        </nav>
      </div>
    </header>
<section id="content" role="main" class="asideleft">
  <section class="main">
    <article lang="en">
      <h1>36: CSS static and relative positioning</h1>
      <p class="print author">By Tommy Olsson</p>

      <div class="note">
<h2 style="color:red;font-weight:bold;padding-top:0;margin-top:0;">11th October 2012: Material moved to <a href="http://www.webplatform.org">webplatform.org</a></h2>

<p style="padding-bottom: 20px;">The Opera web standards curriculum has now been moved to the <a href="http://docs.webplatform.org/wiki/Main_Page">docs section of the W3C webplatform.org site</a>. Go there to find updated versions of these docs, and much more besides!</p>

<h2 style="color:red;font-weight:bold;padding-top:0;margin-top:0;">12th April 2012: This article is obsolete</h2>

<p>The web standards curriculum has been donated to the <a href="http://www.w3.org/community/webed/">W3C web education community group</a>, to become part of a much bigger educational resource. It is constantly being updated so that it remains current with modern web design practices and technologies. To find the most up-to-date web standards curriculum, visit the <a href="http://www.w3.org/community/webed/wiki/Main_Page">web education community group Wiki</a>. Please make changes to this Wiki yourself, or suggest changes to <a href="mailto:cmills@opera.com">Chris Mills</a>, who is also the chair of the web education community group.</p>
</div>

<ul class="seriesNav">
<li class="prev"><a href="../35-floats-and-clearing/index.html" rev="prev" title="link to the previous article in the series">Previous article—Floats and clearing</a></li>
<li class="next"><a href="../37-css-absolute-and-fixed-positioning/index.html" rel="next" title="link to the next article in the series">Next article—CSS absolute and fixed positioning</a></li>
<li><a href="../1-introduction-to-the-web-standards-cur/index.html#toc" rel="index">Table of contents</a></li>
</ul>		
		<h2>Introduction</h2>
		
		<p>In this article I’ll start looking in depth at how you can use <abbr>CSS</abbr> to position <abbr>HTML</abbr> elements wherever you want on the page, using the
		<code>position</code> <abbr>CSS</abbr> property and some related properties.</p>

		<p>The <code>position</code> property in <abbr>CSS</abbr> has four legal values (in addition to the ubiquitous <code>inherit</code>):
		<code>static</code>, <code>relative</code>, <code>absolute</code> and <code>fixed</code>.
		These values have a significant impact on how an element is rendered.
		The two values <code>static</code> and <code>relative</code> are closely related, and we’ll look into those in great detail in this article.
		The values <code>absolute</code> and <code>fixed</code> are also closely related, and I’ll save those for the next article in the series.</p>
		
		<p>The structure of this article is as follows:</p>
		
		<ul>
  <li><a href="index.html#rectangles">The wonderful world of rectangles</a></li>
  <li><a href="index.html#static">Static positioning</a>
    <ul>
      <li><a href="index.html#blockboxlayout">Block box layout</a></li>
      <li><a href="index.html#inlineboxlayout">Inline box layout</a></li>
    </ul>
  </li>
  <li><a href="index.html#relative">Relative positioning</a>
    <ul>
      <li><a href="index.html#multicolumnlayout">Multi-column layout with source order requirements</a>
        <ul>
          <li><a href="index.html#makingcolumns">Making columns</a></li>
          <li><a href="index.html#iequirks">Working around quirks in Internet Explorer</a></li>
        </ul>
      </li>
      <li><a href="index.html#otherusesforrelative">Other uses for relative positioning</a></li>
    </ul>
  </li>
  <li><a href="index.html#summary">Summary</a></li>
  <li><a href="index.html#exercises">Exercise questions</a></li>
</ul>

		<h2 id="rectangles">The wonderful world of rectangles</h2>
		
		<p>Now for a bit of a recap on CSS and HTML boxes, as discussed in <a href="../35-floats-and-clearing/index.html">Article 35 on floats and clearing</a>. An <abbr>HTML</abbr> document consists of a number of elements interspersed with character data (text).
		When such a document is rendered on a computer screen or printed on paper, those elements generate rectangular boxes.
		Just as the set of <abbr>HTML</abbr> elements is divided into block-level elements and inline elements, boxes in <abbr>CSS</abbr> are
		essentially either block boxes or inline boxes.
		By default, the built-in user agent style sheet in a browser makes block-level <abbr>HTML</abbr> elements such as <code>p</code> and <code>div</code> generate block boxes, while inline elements such as <code>strong</code> and <code>span</code> generate inline boxes.
		We can control the type of box that is generated using the <code>display</code> property.</p>

		<p>The boxes generated by the elements in a document are laid out according to a clearly defined set of rules in the
		<a href="http://www.w3.org/TR/CSS21"><abbr>CSS</abbr>2.1 specification</a>.
		Those rules are written for the relatively few people who write browser software to learn how CSS works though, not for those of us who design web pages for a living—or a hobby. This is why this entire course exists!
		As a result, the specification can be a bit difficult to understand.
		In this article I’ll try to explain the basics in a way that is better suited for web designers and developers.</p>

		<h2 id="static">Static positioning</h2>
		
		<p>This is really a misnomer.
		Boxes with <code>position:static</code>   are not really “positioned” at all in the <abbr>CSS</abbr> sense.
		They are simply laid out in the order they occur in the markup and take up as much room as they need—this is the default behavior you get when you don’t apply any CSS at all to your HTML.</p>

		<p>There are fundamental differences in how block boxes are laid out compared to how inline boxes are laid out, so let’s examine the two types one at a time. I’ll start with block boxes, because they are simpler.</p>

		<h3 id="blockboxlayout">Block box layout</h3>
		
		<p>Unless we apply any specific <abbr>CSS</abbr> declarations, block boxes are laid out vertically from top to bottom in the order they occur in the markup.
		Each box is normally as wide as the document (the <code>body</code> element), but even if we make them narrower they will not be laid out side by side even if there’s room; they’ll still be laid out one below the other.
		You can think of it as if each block box had an implicit line break before and after it, to make sure it ends up on a “line” of its own.</p>

		<p>The vertical distance between two block boxes is controlled by the <code>margin-bottom</code> property of the first box and the
		<code>margin-top</code> property of the second box (you’ve seen how to manipulate these earlier in the course).
		For boxes in the <dfn>normal flow</dfn>, <abbr>ie</abbr> boxes that aren’t floated or absolutely positioned, the vertical margins between two adjacent
		block boxes will <dfn>collapse</dfn>—overlap—so that the net result is not the sum of the two margins, but the greater of the two, as seen in Figure 1 below.</p>

		<p>Consider the following <abbr>HTML</abbr> fragment:</p>
		
		<pre><code>&lt;p style=&quot;margin-bottom:40px&quot;&gt;This paragraph has a 40px bottom margin.&lt;/p&gt;
&lt;p style=&quot;margin-top:20px&quot;&gt;This paragraph has a 20px top margin.&lt;/p&gt;</code></pre>

<p>When viewed in a browser, the margins collapse, as shown in Figure 1.</p>

		<p><img src="../../../../devfiles.myopera.com/articles/495/collapsing-margins.png" alt="The distance between the two paragraphs is 40px not 60px" /></p>
		<p class="comment">Figure 1: The margins collapse—the distance between the two is 40px, not 60px.</p>

		<p>A block box will either contain only other block boxes or only inline boxes.
		If a block-level element contains a mix of block-level and inline children—which is permissible, although semantically questionable’so-called
		<dfn>anonymous block boxes</dfn> will be generated to encompass the inline child boxes, so that the parent only contains block boxes.</p>

		<p>You can specify the dimensions of a block box using the <code>width</code> and <code>height</code> properties.
		You can also set both vertical and horizontal margins on them.
		The initial (default) value for <code>width</code> and <code>height</code> is <code>auto</code>, and the initial value for margin properties is <code>0</code>.
		These factors in combination mean that a block box will by default be as wide as its parent, as illustrated in Figure 2.</p>

		<p><img src="../../../../devfiles.myopera.com/articles/495/fc-ss-01.png" alt="Block boxes are laid out vertically" /></p>
		<p class="comment">Figure 2: Block boxes are laid out vertically.</p>

		<h3 id="inlineboxlayout">Inline box layout</h3>
		
		<p class="note">This section may be difficult to understand if you’re new to <abbr>CSS</abbr>, but don’t despair if you don’t get it the first time you read it.
		Experimenting a little on your own is probably the best way to get a solid understanding of these issues—just make sure that you’re using a good, standards-compliant
		browser when testing, such as Opera or Firefox.</p>

		<p>Inline boxes are generated by default by inline <abbr>HTML</abbr> elements, but there are also <dfn>anonymous inline boxes</dfn> generated to encompass
		the text content of elements.</p>

		<p>The inline boxes are laid out horizontally, one after the other, in the order in which they occur in the markup.
		Depending on the <code>direction</code> property, the inline boxes will either be laid out from left to right (<code>direction:ltr</code>  ) or from
		right to left (<code>direction:rtl</code>  ).
		Left-to-right direction is used with, for instance, European languages, while right-to-left direction is used with languages such as Arabic and Hebrew.</p>

		<p>The set of inline boxes that make up one line on the screen (or paper) are enclosed in yet another rectangle, known as a <dfn>line box</dfn>.
		Line boxes are laid out vertically within their block-level parent, with no space between them.
		We can affect the height of line boxes through the <code>line-height</code> property.</p>

		<p>For inline boxes we cannot specify any dimensions.
		We can specify horizontal margins, but not vertical margins.</p>

		<p>If necessary, an inline box will be split into several inline boxes, distributed over two or more line boxes.
		When such a split occurs, any horizontal margins and padding, and any vertical borders, will only apply before the first box and after the last box.
		Consider a document with the following rule for <code>em</code> elements:</p>
		
<pre><code>em {
  margin: 0 2em;
  padding: 0 1em;
  border: 1px dotted blue;
}</code></pre>

<p>This will give you a layout somewhat like that seen in Figure 3, when the styled elements are broken over multiple lines.</p>

		<p><img src="../../../../devfiles.myopera.com/articles/495/split-inline-box.png" alt="The margins padding and border do not apply where the breaks occur" /></p>
		<p class="comment">Figure 3: Margins, padding and border do not apply where breaks occur.</p>

		<p>The vertical alignment of inline boxes within the encompassing line box is determined by the <code>vertical-align</code> property.
		The default value is <code>baseline</code>, which means that the inline boxes are aligned so that their text baselines line up.
		The baseline is the imaginary line on which letters without descenders stand.
		It is placed some distance above the bottom of the line box to leave room for the descenders of lowercase letters, as shown in Figure 4.</p>

		<p><img src="../../../../devfiles.myopera.com/articles/495/baseline.png" alt="Letters stand on the imaginary baseline" /></p>
		<p class="comment">Figure 4: Letters stand on the imaginary baseline.</p>

		<p>Note that the <code>vertical-align</code> property applies to inline boxes and table cells only, and it isn’t inherited.
		Figure 5 shows some small images with different vertical alignment.</p>

		<p><img src="../../../../devfiles.myopera.com/articles/495/vertical-align.png" alt="Images placed using settings of the vertical align CSS property" /></p>
		<p class="comment">Figure 5: Images placed using settings of the <code>vertical-align</code> CSS property.</p>

		<p>When the total width of the inline boxes within a line box is less than the width of the line box itself, the horizontal alignment is controlled by the
		<code>text-align</code> property.
		With <code>text-align:justify</code>, extra space is inserted between the inline boxes, if necessary, to make the content both left- and right-justified.
		This property applies to block boxes, table cells and inline blocks, and it is inherited—Figure 6 shows the result of applying different values of the <code>text-align</code> property to text inside table cells.</p>

		<p><img src="../../../../devfiles.myopera.com/articles/495/text-align.png" alt="Controlling the alignment of text using the text-align property" /></p>
		<p class="comment">Figure 6: Controlling the alignment of text using the <code>text-align</code> property.</p>

		<h2 id="relative">Relative positioning</h2>
		
		<p>Relative positioning is a positioning scheme in <abbr>CSS</abbr>, but it is more closely related to static “positioning” than with its cousins—absolute and fixed positioning.</p>

		<p>An element with <code>position:relative</code>   is first laid out just like any static element; block-level or inline.
		But then something interesting happens: the <em>generated box</em> is shifted according to the <code>top</code>, <code>bottom</code>,
		<code>left</code> and <code>right</code> properties.</p>

		<p>The thing to remember about relative positioning is that it’s only the generated box that is shifted.
		The element still remains where it was in the static document flow.
		That’s where it “takes up space” as far as other elements are concerned.
		This means that the shifted box may end up overlapping other elements’ boxes, because they still act like the relatively positioned element has remained
		where it should be, before the positioning was applied. As far as the document flow is concerned, the element has not moved—it is just the end visual result that shows the box being moved. Let’s look at it in practice.</p>

		<ol>
			<li><p>Copy the <abbr>HTML</abbr> code below into a new document in your favourite text editor and save it as <kbd>relative.html</kbd>.</p>

<pre><code>&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD HTML 4.01//EN&quot; &quot;http://www.w3.org/TR/html4/strict.dtd&quot;&gt;
&lt;html&gt;
  &lt;head&gt;
    &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=utf-8&quot;&gt;
    &lt;title&gt;Relative Positioning&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;p&gt;Lorem ipsum dolor sit amet consectetuer adipiscing elit.
    Curabitur feugiat feugiat purus.
    Aenean eu metus. Nulla facilisi.
    Pellentesque quis justo vel massa suscipit sagittis.
    Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos hymenaeos.
    Quisque mollis, justo vel rhoncus aliquam, urna tortor varius lacus, ut tincidunt metus arcu vel lorem.
    Praesent metus orci, adipiscing eget, fermentum ut, pellentesque non, dui.
    Sed sagittis, &lt;span&gt;metus a semper&lt;/span&gt; dictum, sem libero sagittis nunc, vitae adipiscing leo neque vitae tellus.
    Duis quis orci quis nisl nonummy dapibus.
    Etiam ante. Phasellus imperdiet arcu at odio.
    In hac habitasse platea dictumst. Aenean metus.
    Quisque a nibh. Morbi mattis ullamcorper ipsum.
    Nullam odio urna, feugiat sed, bibendum sed, vulputate in, magna.
    Nulla tortor justo, convallis iaculis, porta condimentum, interdum nec, arcu.
    Proin lectus purus, vehicula et, cursus ut, nonummy et, diam.&lt;/p&gt;
  &lt;/body&gt;
&lt;/html&gt;</code></pre></li>

			<li><p>Open the file in your web browser to see how it looks at this stage—you should just see a plain paragraph of text.</p></li>

			<li><p>Create a new document in your editor, copy the <abbr>CSS</abbr> code below into it and save the file as <kbd>style.css</kbd>.</p>

<pre><code>p {
  width: 20em;
}

span {
  background-color: lime;
}</code></pre></li>

			<li><p>Link the style sheet to the <abbr>HTML</abbr> document by inserting the following line just before the <code>&lt;/head&gt;</code> tag:</p>
			
			<pre><code>&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;style.css&quot;&gt;</code></pre></li>

			<li><p>Save both files and reload the page in your browser.
			I have narrowed the paragraph to make the line breaks occur at the same position even in small browser windows. The <code>span</code> element now has a migraine-inducing background colour to make it more visible.</p></li>

			<li><p>Next, let’s modify the style sheet by adding three declarations to the rule for the <code>span</code> element:</p>
			
<pre><code>span {
  <strong>position: relative;</strong>
  <strong>top: 1em;</strong>
  <strong>left: 2em;</strong>
  background-color: lime;
}</code></pre></li>

			<li><p>Save and reload the page in the browser to see the effects of relative positioning.</p></li>
		</ol>

		<p>You have shifted the <code>span</code> element both vertically and horizontally.
		Notice how it now overlaps the next line of text, and how there is an empty hole where it used to be.</p>

		<p>The way the generated box has been shifted may not be what you expected from the code.
		You specified <code>top:1em</code>, but the box was shifted <em>downward</em>.
		Also, the box was shifted to the <em>right</em>, even though you specified <code>left:2em</code>.
		Why is this?</p>

		<p>The key to understanding how these properties work with relative positioning is to realise that they specify the <em>edge</em> that the movement is applied to, not the direction of movement.
		In other words, the <code>top</code> property shifts the box relative to its top edge, the <code>left</code> property shifts the box relative to its left edge, and so on.
		The box is shifted <em>away</em> from the specified edge, so <code>top:1em</code> shifts the box 1em away from the top position—in other words, downwards.
		Negative numbers shift the box in the opposite direction, so <code>bottom:-1em</code> is the same as <code>top:1em</code>.</p>

		<p>This leads us to another conclusion: it’s pointless to specify both the <code>top</code> property and the <code>bottom</code> property
		(or <code>left</code> and <code>right</code>) for the same element.
		The rules of <abbr>CSS</abbr> say that <code>bottom</code> should be ignored if <code>top</code> is specified.
		For horizontal movement it depends on the <code>direction</code> property.
		In a left-to-right environment <code>right</code> is ignored if both <code>left</code> and <code>right</code> are specified;
		in a right-to-left environment <code>left</code> is ignored.</p>

		<p>The example we just looked at explains relative positioning, but it doesn’t seem very useful, does it?
		So what use is relative positioning?
		Let’s look at a more involved example.</p>

		<h3 id="multicolumnlayout">Multi-column layout with source order requirements</h3>
		
		<p>A word of warning: this example is a bit complex.
		If you’re new to the world of <abbr>CSS</abbr> it may even appear a bit daunting, but I’ll talk you through it at a gentle pace and explain what I’m doing
		as I go along. If you haven’t yet Article 35, which covers <a href="../35-floats-and-clearing/index.html">floats and clearing</a>, now would be a good time to do so.</p>

		<p>There’s one type of layout that is very common on web sites.
		It consists of a page header, often containing some masthead graphic, under which there are two or more “columns” side by side.
		Below all this there is often a full-width footer, perhaps with a copyright statement or contact information.
		Figure 7 shows an example of this type of layout.</p>

		<p><img src="../../../../devfiles.myopera.com/articles/495/acme.png" alt="Multiple column layout with header and footer" /></p>
		<p class="comment">Figure 7: A typical multiple column layout, with columns sandwiched between a header and a footer.</p>

		<p>This type of layout used to be created with layout tables back in the Dark Ages (the 1990s).
		That’s an abuse of <abbr>HTML</abbr> markup for presentational purposes, which is not advised, so therefore which we will not be teaching you about in this course.
		<abbr>CSS</abbr> offers ways to achieve the same thing using <code>display:table-cell</code>  and similar, but there’s a major drawback to that solution:
		it’s not currently supported by any version of Internet Explorer, so we won’t look at that either.
		Only two options remain: floats or absolute positioning.
		Both methods have their advantages and drawbacks, but if you want a full-width footer and don’t know in advance which column will be the longest, then floats are necessary to ensure the integrity of your design.</p>

		<p>The problem with floats is that they only shift to the left or right until they touch the edge of the parent block, or another float.
		That means floated columns have to appear in the right order in your markup.
		But sometimes it’s desirable to have a presentational order that is different from the source order.
		You may want to have the content before the navigation, for instance, to enhance usability for keyboard navigation and to improve search engine optimisation.
		This is possible to achieve, even with floats, with some judicious use of negative margins and relative positioning—let’s have a look at how to do this. Let’s begin with a skeleton, or wireframe, <abbr>HTML</abbr> document.</p>

		<ol>
			<li><p>Copy the code below into your text editor and save the file as <kbd>layout.html</kbd>.</p>
<pre><code>&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD HTML 4.01//EN&quot; &quot;http://www.w3.org/TR/html4/strict.dtd&quot;&gt;
&lt;html lang=&quot;en&quot;&gt;
  &lt;head&gt;
    &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=utf-8&quot;&gt;
    &lt;title&gt;Static and Relative Positioning&lt;/title&gt;
    &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;layout.css&quot;&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;div id=&quot;header&quot;&gt;Header&lt;/div&gt;
    &lt;div id=&quot;main&quot;&gt;Main content&lt;/div&gt;
    &lt;div id=&quot;sidebar&quot;&gt;Sidebar&lt;/div&gt;
    &lt;div id=&quot;nav&quot;&gt;Navigation&lt;/div&gt;
    &lt;div id=&quot;footer&quot;&gt;Footer&lt;/div&gt;
  &lt;/body&gt;
&lt;/html&gt;</code></pre></li>

			<li><p>Next, you’ll create the embryo of a style sheet.
			Copy the code below into your text editor and save the file as <kbd>layout.css</kbd>.</p>
<pre><code>#header {
  background-color: #369;
  color: #fff;
}

#sidebar {
  background-color: #ff6;
}

#nav {
  background-color: #ddd;
}

#footer {
  border-top: 1px solid #369;
}</code></pre></li>

			<li><p>Save both files and load the page in your browser.
			The five divisions appear in order, from top to bottom.</p>

			<p>Imagine your design department has specified that the navigation must be on the left and the sidebar on the right, with the main content column in the middle.
			The header and footer should extend across the whole page width and we don’t know which of the three columns in between will be the longest.
			The source order is mandated by your accessibility and usability experts and isn’t negotiable.
			How can you combine all those requirements into a working layout?</p>

			<p>You are going to have to add an extra element into the markup for this to work. It’s unavoidable, but one extra element is something you ought to be able to live with.
			You need an element that wraps around the three “columns”.</p></li>

			<li><p>Insert the two highlighted lines below into the <abbr>HTML</abbr> document:</p>
			
<pre><code>&lt;div id=&quot;header&quot;&gt;Header&lt;/div&gt;
  <strong>&lt;div id=&quot;wrapper&quot;&gt;</strong>
    &lt;div id=&quot;main&quot;&gt;Main content&lt;/div&gt;
    &lt;div id=&quot;sidebar&quot;&gt;Sidebar&lt;/div&gt;
    &lt;div id=&quot;nav&quot;&gt;Navigation&lt;/div&gt;
  <strong>&lt;/div&gt;</strong>
&lt;div id=&quot;footer&quot;&gt;Footer&lt;/div&gt;</code></pre>

			<p>The designers (who, fortunately, understand accessibility and device independence) have stipulated that the navigation needs to be 12em wide while the sidebar should be 14em.
			The main content column should have a fluid width, so that the layout adapts to different window sizes, since fixed-width layouts aren’t very user friendly.
			To prevent lines of text from being too long, impeding readability, you need to constrain the layout to a maximum width.
			In order to prevent overlap in extremely narrow windows you also need to constrain the layout to a minimum width.
			Within those constraints, the layout should be centred horizontally within the browser window.</p></li>

			<li><p>Next, assign the widths to the navigation and the sidebar and set the width constraints and general centering by adding the following rules to the bottom of  the <abbr>CSS</abbr> file:</p>
			
<pre><code><strong>body {
  margin: 0 auto;
  min-width: 40em;
  max-width: 56em;
}</strong>

#sidebar {
  <strong>width: 13em;</strong>
  <strong>padding: 0 0.5em;</strong>
  background-color: #ff6;
}

#nav {
  <strong>width: 11em;</strong>
  <strong>padding: 0 0.5em;</strong>
  background-color: #ddd;
}</code></pre></li>

			<li><p>Save the files and reload—you should see that the yellow sidebar and the grey navigation elements have the widths you want.
			If your browser window is wide enough, you will also see that the whole page is constrained in width and is centred horizontally.</p></li>

			<li><p>Try changing the window size and see how the layout adapts.</p>

			<p class="note">Note: if you are using Microsoft Internet Explorer version 6 or older, you won’t see the effects of any width constraints.
			That’s because those versions of IE don’t support minimum and maximum widths (or heights).
			We will look at a workaround for that at the end of the example.
			In fact, you will get odd results throughout this example, even with <abbr>IE7</abbr>, because Internet Explorer has many strange rendering bugs.
			I will focus on the standards-compliant way to do things in the example, and turn to workarounds at the end.</p></li>
		</ol>

		<p>If you look closely at the code you’ll see that the widths were set to 13em and 11em instead of 14em and 12em.
		That’s because you need some horizontal padding; you don’t want the content of those columns to lie flush with the edges, because it doesn’t look very nice.
		Padding adds to the width, so 13em + 0.5em + 0.5em adds up to the 14em you want.</p>

		<h4 id="makingcolumns">Making columns</h4>
		<p>Okay, you have your basic building blocks, but they just appear one after the other.
		You want three columns, so you need to start floating them.</p>

		<ol>
			<li><p>Add the following rules to your <abbr>CSS</abbr> file:</p>
<pre><code>#main {
  <strong>float: left;</strong>
}

#sidebar {
  <strong>float: left;</strong>
  width: 13em;
  padding: 0 0.5em;
  background-color: #ff6;
}

#nav {
  <strong>float: left;</strong>
  width: 11em;
  padding: 0 0.5em;
  background-color: #ddd;
}</code></pre>

			<p>That floats them, all right, but they’re in the wrong order.
			Also, the main content column is too narrow.
			And what happened to our footer?</p></li>

			<li><p>Let’s deal with the footer first.
			The problem is that the three columns are floated, which takes them out of the document flow.
			The footer is pushed up against the header and the line box containing the text is shortened so that the word “Footer” appears to the right of the floats.
			You can remedy this by making sure the footer is cleared from all the floated columns.
			Add the following rule to the <abbr>CSS</abbr> file:</p>
			
<pre><code>#footer {
  <strong>clear: left;</strong>
  border-top: 1px solid #369;
}</code></pre></li>

			<li><p>Now for the three columns.
			This will be done step by step, and it’s going to look rather ugly for a while, but don’t despair—It’ll be sorted out by the end.</p>

			<p>The key to this whole trick is the wrapper element.
			We will set a left and right margin on it that corresponds to the widths of your side columns (the navigation and the sidebar).
			The main content column will occupy the whole width of the wrapper, while the side columns will be shifted into the space vacated by the margins.
			Does that sound complicated?
			Don’t worry, I’ll take you through it in small increments.
			First, set up the margins for the wrapper, by adding the following rule to the <abbr>CSS</abbr> file:</p>

<pre><code>#wrapper {
  margin: 0 14em 0 12em;
  padding: 0 1em;
}</code></pre>

			<p>Remember that the values in the <code>margin</code> shorthand property are specified in <strong>TRouBLe</strong> order: top, right, bottom, left.
			We are setting the top and bottom margins to 0, the right margin to 14em (for the sidebar) and the left margin to 12em (for the navigation).
			You’ve also added 1em of horizontal padding, because you don’t want your content to be flush with the side columns; it needs to breathe.</p></li>

			<li><p>The next step is to make the main content column take up the full width of its wrapper parent;
			the code also sets a garish background colour to it, temporarily, so ’re doing:</p>
			
<pre><code>#main {
  float: left;
  <strong>width: 100%;</strong>
  <strong>background-color: lime;</strong>
}</code></pre></li>

			<li><p>Save and reload—you’ll see a bright lime green content column, with the sidebar and navigation below it.
			You’ll also notice that there is a lot of white space on both sides.
			The trick is to get our side columns to slip into that white space.</p>

			<p>Next I’ll move you on to the sidebar—it’s floated and it has the right width, but since the <code>#main</code> column is 100% wide, it pushes the sidebar down.
			How do you get it to go up and stay next to <code>#main</code>, although <code>#main</code> occupies the whole width?
			Let’s do it in two small steps: first, you’ll move it up; then you’ll shift it out into the margin.</p></li>

			<li><p>Here you’ll use a nifty trick to get the floated sidebar, which has been pushed down, to move back up again—make the following addition to the <code>#sidebar</code> rule:</p>
			
<pre><code>#sidebar {
  float: left;
  width: 13em;
  padding: 0 0.5em;
  background-color: #ff6;
  <strong>margin-left: -14em;</strong>
}</code></pre></li>

			<li><p>Save and reload, and you’ll see that the sidebar is now on the same vertical level as the content column.
			By setting a negative left margin equal to the width of the sidebar, we move the element back into the wrapper and it isn’t pushed down.
			The problem is that it overlaps the content.</p></li>

			<li><p>You need to shift it out into the margin without making it drop down again, and this is where relative positioning—finally—comes in.
			It does precisely what we want: it shifts the generated box without moving the element itself.
			Add the highlighted properties below into the rule for <code>#sidebar</code>:</p>
			
<pre><code>#sidebar {
  float: left;
  width: 13em;
  padding: 0 0.5em;
  background-color: #ff6;
  margin-left: -14em;
  <strong>position: relative;</strong>
  <strong>left: 15em;</strong>
}</code></pre>

			<p>Note that you had to shift it 15em, not 14em—that’s because there’s 1em of right padding on the wrapper that you need to get past.
			The sidebar is now where it belongs: out in the margin, next to the content column, lining up nicely with the right-hand edges of the header and the footer.</p></li>

			<li><p>Now you need to do the same with the navigation this is done in a similar way, but it has a twist of its own.
			Moving and shifting the sidebar was easy, because the movements were essentially the same as the column’s width: 14em negative margin and a 14em+1em shift to the right.
			But the navigation column needs to be moved all the way across the content column and then be shifted even further out into the margin.</p>

			<p>Our friend here is percentages.
			A percentage value on the margins of the navigation column will be relative to the width of its parent, the wrapper.
			You want to move the column all the way across the wrapper—add the property highlighted below to the rule for <code>#nav</code>:</p>

<pre><code>#nav {
  float: left;
  width: 11em;
  padding: 0 0.5em;
  background-color: #ddd;
  <strong>margin-left: -100%;</strong>
}</code></pre></li>

			<li><p>Hey presto!
			Save and reload again, and you should see the navigation overlapping the left-hand side of the content column.
			All you need to do now is to shift it out into the margin.
			Add the following highlighted properties to the rule for <code>#nav</code>:</p>

<pre><code>#nav {
  float: left;
  width: 11em;
  padding: 0 0.5em;
  background-color: #ddd;
  margin-left: -100%;
  <strong>position: relative;</strong>
  <strong>right: 13em;</strong>
}</code></pre>

			<p>Again, the width of the navigation is 12em, but you have 1em of wrapper padding to get past so you need to shift the box 13em.
			You’re shifting it to the left, in other words <em>from</em> the right edge, which is why the <code>right</code> property is being used.</p></li>

			<li><p>Remove the lime green background from the content column, and you’re all set to go.</p></li>
		</ol>

		<h4 id="iequirks">Working around quirks in Internet Explorer</h4>
		
		<p>There are two things about Internet Explorer that cause this layout that cause it to fail in that browser on Windows.
		One is that <abbr>IE6</abbr> doesn’t support the <code>min-width</code> and <code>max-width</code> properties,
		the other is that IS is notoriously bad at percentages.</p>

		<p>You can use Microsoft’s proprietary <code>expression()</code> notation to emulate the width constraints.
		It takes a JScript expression as its argument and returns the return value of that expression.
		This can cause performance problems if the expression requires a lot of computing, since it is evaluated every time the browser needs to get the width of <code>body</code>.
		It also requires JScript to be enabled, but you can add graceful degradation, so that if say, JScript is not available, the design will falllback to something that is still usable. In this example, you’ll make the layout fully elastic instead of the constrained fluid design created above if JScript is disabled.</p>

		<p>The recommended way of serving bug-fix style rules to Internet Explorer is to make use of “conditional comments”.
		That’s a Microsoft-only feature that embeds conditional logic into <abbr>HTML</abbr> comments (there is a <a href="../supporting-ie-with-conditional-comments/index.html">dedicated conditional comments article on dev.opera.com</a>).</p>
		<ol>
		<li>
		<p>Add the following lines to your <abbr>HTML</abbr> code, just before the <code>&lt;/head&gt;</code> tag:</p>
		
<pre><code>&lt;!--[if lte IE 6]&gt;
  &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;layout-ie6.css&quot;&gt;
&lt;![endif]--&gt;</code></pre>
</li>
<li>
		<p>Next, create a new file named <kbd>layout-ie6.css</kbd> with the following content:</p>
		
<pre><code>body {
  width: 50em;
  width: expression(w=document.documentElement.offsetWidth, em=document.getElementById(&quot;nav&quot;).offsetWidth/12, (w&lt;40*em?&quot;40em&quot;: (w&gt;56*em?&quot;56em&quot;:&quot;auto&quot;)));
}

#wrapper {
  height: 1em;
}

#nav {
  margin-left: -22em;
  margin-left: expression((-(document.getElementById(&quot;wrapper&quot;).clientWidth))+&quot;px&quot;);
  left: 13em;
}</code></pre>
</li>
</ol>
		<p>This sorts out the two problems in <abbr>IE6</abbr>.
		You’re using JScript expressions to emulate the <code>min-width</code> and <code>max-width</code> properties that <abbr>IE6</abbr> doesn’t support, with an elastic fallback value of 50em.
		Then you use another JScript expression to set a left margin in pixels instead of percents, again with an elastic fallback.
		The height for <code>#wrapper</code> is just to trigger the Microsoft-specific <code>hasLayout</code>, which it needs to have for the relative positioning of the navigation
		element to work properly. Microsoft has documented <code>hasLayout</code> on <abbr>MSDN</abbr>, but it’s not all that easy to understand.</p>

		<p>What about <abbr>IE7</abbr> then?
		It does support <code>min-width</code> and <code>max-width</code>, but it still positions the navigation element wrong—it’s the same <code>hasLayout</code> bug as in <abbr>IE6</abbr> rearing its ugly head again.
	You need to trigger <code>hasLayout</code> on the <code>#wrapper</code> element.
		Fortunately, you can do this in a way that doesn’t compromise standards-compliant browsers, so you don’t need to create a separate <abbr>IE7</abbr> style sheet; you could just add the following rule to manipulate the wrapper:</p>
		
<pre><code>#wrapper {
  margin: 0 14em 0 12em;
  padding: 0 1em;
  <strong>min-height: 1em;</strong>
}</code></pre>

		<p>Setting a minimum height triggers <code>hasLayout</code> and it causes no problem in other browsers, so it can go in your main style sheet.</p>

		<p>These workarounds aren’t perfect; the layout will still do odd things in <abbr>IE6</abbr> and <abbr>IE7</abbr> if the browser window is resized to certain sizes, although if the page is then reloaded, the layout looks okay again.</p>

		<h3 id="otherusesforrelative">Other uses for relative positioning</h3>
		
		<p>The most common use for relative positioning doesn’t involve shifting the generated box at all.
		This may sound strange: why should you want to use relative positioning without shifting the box?
		The reason will be revealed in the next article, because it involves absolute positioning. Stay tuned!</p>

		<p>Setting <code>position:relative</code>   (without shifting the box) also helps with some of the strange rendering bugs in Internet Explorer.
		It sets the infamous <code>hasLayout</code> internal property, which has a profound impact on how Internet Explorer renders elements.</p>

		
		<h2 id="summary">Summary</h2>
		<p>Static positioning is the default state of affairs.
		Block boxes are laid out vertically in source order, while inline boxes are laid out horizontally in line boxes within those block boxes.</p>

		<p>Relative positioning allows you to shift the generated box in one or two dimensions.
		The element still occupies space as if it were static, but the generated box can be shifted to another position.
		Relative positioning is mainly useful in combination with floats to create layouts where the presentational order differs from the source order.</p>
		
		<h2 id="exercises">Exercise questions</h2>
		<ul>
			<li>What happens when two adjacent margins in a static formatting context collapse and one of the margins—or both—is negative?</li>

			<li>Add a vertical border between each of the side columns and the main content column. Remember that all three columns are floated, so the wrapper element’s height has collapsed to zero.</li>

			<li>How can you make all the columns have the same height (or at least appear to), so that the background colours extend down to the footer, no matter which column is the longest? (Hint: search for “faux columns” in your favourite search engine.)</li>
		</ul>

		
<ul class="seriesNav">
<li class="prev"><a href="../35-floats-and-clearing/index.html" rev="prev" title="link to the previous article in the series">Previous article—Floats and clearing</a></li>
<li class="next"><a href="../37-css-absolute-and-fixed-positioning/index.html" rel="next" title="link to the next article in the series">Next article—CSS absolute and fixed positioning</a></li>
<li><a href="../1-introduction-to-the-web-standards-cur/index.html#toc" rel="index">Table of contents</a></li>
</ul>	
	
	<h2>About the author</h2>

<p><img src="../../../../devfiles.myopera.com/articles/495/tommyOlsson.jpg" alt="Picture of the article author Tommy Olsson" class="right" /></p>

<p>Tommy Olsson is a pragmatic evangelist for web standards and accessibility, who lives in the outback of central Sweden. He wrote his first HTML document in 1993 and is currently the technical webmaster for a Swedish government agency.</p>

<p>He has written one book so far—The Ultimate CSS Reference (with Paul O’Brien).</p>

      <p id="license" class="info">This article is licensed under a <a href="http://creativecommons.org/licenses/by-nc-sa/2.5/" rel="license">Creative Commons Attribution, Non Commercial - Share Alike 2.5</a> license.</p>

    </article>
<section id="comments">
  <h2>Comments</h2>
      <p class="info">The forum archive of this article is still available on <a href="http://my.opera.com/community/forums/topic.dml?id=251081">My Opera</a>.</p>
  <ul>
  </ul>
No new comments accepted.
</section>

  </section>

  <aside>
    <section class="info">
      <p class="author"><strong>Author</strong> <a href="../../../author/AutisticCuckoo.html" rel="author">Tommy Olsson</a></p>
      <p>
        <strong>Date</strong>
        Friday, September 26, 2008
      </p>

      <p class="tags"><strong>Tags</strong></p>
      <ul class="tags">
        <li><a href="../../tags/block.html" rel="tag">block</a></li>
        <li><a href="../../tags/column.html" rel="tag">column</a></li>
        <li><a href="../../tags/IE.html" rel="tag">IE</a></li>
        <li><a href="../../tags/inline.html" rel="tag">inline</a></li>
        <li><a href="../../tags/layout.html" rel="tag">layout</a></li>
      </ul>
    </section>
  </aside>




</section>
<script type="text/javascript" src="../../../../static.myopera.com/dev/js/highlight.pack.js"></script>
<script type="text/javascript">hljs.initHighlightingOnLoad();</script>

    <footer>
      <section role="contentinfo">
        <ul>
          <li><a href="../../../help.html">Help/<abbr>FAQ</abbr></a>
          <li><a href="http://my.opera.com/community/terms-of-service/?utm_source=devopera&amp;utm_medium=footer&amp;utm_campaign=devlinks">Terms of service</a>
          <li><a href="../../../privacy.html">Privacy</a>
        </ul>
      </section>
    </footer>
  </body>
</html>
