<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Расширения для Opera: кнопки, бейджи и всплывающие окна - Dev.Opera</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="google-site-verification" content="L7q_7GF5c9d7ZAUYdfaTiRaB6sTAGv_cRz3nq5DsabM">
    <meta name="description" content="Dev.Opera is the ultimate source of distilled knowledge for web developers, covering the latest open web technologies and techniques including HTML5, CSS3, JavaScript, SVG, optimizing content for mobiles, tablets and TVs, and creating add-ons such as extensions and themes for the Opera browser.">
    <meta name="keywords" content="Opera, web, HTML5, HTML, CSS3, CSS, JavaScript, SVG, Geolocation, Widgets, Extensions, Unite, Mini, Mobile, web development, design, web design, tutorials, articles, examples, demos, web standards, open standards, open web, video, audio, getusermedia, accessibility, wai-aria, transitions, translations, microformats, microdata, dataset, media queries, viewport, @viewport, transparency, opacity, gradients, box-shadow, text-shadow, web fonts, appcache, websql, local storage, ajax, json, games, userjs, webgl, tv, tablet, emulator, skinning, themes, skins, drasgonfly, mathml, web sockets, operawatir">
    <link rel="icon" href="../../../../static.myopera.com/dev/img/speed_dial-icon.png" type="image/png">
    <link rel="apple-touch-icon" href="../../../../static.myopera.com/dev/img/touch-icon.png" type="image/png">
    <link rel="shortcut icon" href="../../../favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="../../../../static.myopera.com/dev/css/devopera.css" type="text/css">
    <!--[if IE 6]><link rel="stylesheet" href="/css/browsers/ie6.css" type="text/css"><![endif]-->
    <!--[if IE 7]><link rel="stylesheet" href="/css/browsers/ie7.css" type="text/css"><![endif]-->
    <!--[if IE 8]><link rel="stylesheet" href="/css/browsers/ie8.css" type="text/css"><![endif]-->
    <!--[if lte IE 8]><script type="text/javascript" src="/js/ie.js"></script><![endif]-->
    <link rel="stylesheet" href="../../../../static.myopera.com/dev/css/articles.css">
    <link rel="stylesheet" media="print" href="../../../../static.myopera.com/dev/css/print.css">
    <link rel="stylesheet" href="../../../../static.myopera.com/dev/css/github.css">
    <link rel="alternate" type="application/rss+xml" title="Recent articles - RSS 2.0 Feed" href="../../../feeds/rss/articles">
    <link rel="alternate" type="application/atom+xml" title="Recent articles - Atom 1.0 Feed" href="../../../feeds/atom/articles">
    <link rel="alternate" type="application/rss+xml" title="Recent articles in Add-ons - RSS 2.0 Feed" href="../../../feeds/rss/articles/addons">
    <link rel="alternate" type="application/atom+xml" title="Recent articles in Add-ons - Atom 1.0 Feed" href="../../../feeds/atom/articles/addons">
    <link rel="alternate" type="application/rss+xml" title="Recent articles in Opera 11-12 extensions - RSS 2.0 Feed" href="../../../feeds/rss/articles/addons/extensions">
    <link rel="alternate" type="application/atom+xml" title="Recent articles in Opera 11-12 extensions - Atom 1.0 Feed" href="../../../feeds/atom/articles/addons/extensions">
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script type="text/javascript" src="../../../../static.myopera.com/dev/js/menu.js"></script>
    <noscript>
      <style type="text/css">
.collection ul li ul {
    display: inherit !important;
}
      </style>
    </noscript>
    <script type="text/javascript">
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-4118503-4']);
_gaq.push(['_gat._anonymizeIp']);
_gaq.push(['_trackPageview']);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();
    </script>

  </head>
  <body class="extensions">
    <header role="banner"  class="article-view" >
      <div>
        <a href="../../../index.html" id="logo">Dev.Opera</a>
        <form action="http://dev.opera.com/search" role="search">
          <fieldset>
            <label class="hidden" for="q">Search</label>
            <input type="text" name="q" maxlength="256" value="" id="q" required>
            <input type="submit" id="q-submit" value="Search" title="Search">
          </fieldset>
        </form>
        <p id="login">
          <a href="../../../../../https/dev.opera.com/login/index.html" accesskey="L" title="Log in">Log in</a>
        </p>
        <nav id="nav">
          <ul role="menu">

            <li role="menuitem" >
              <a href="../../../web.html">Web</a>
            </li>
            <li role="menuitem"  class="selected">
              <a href="../../../addons.1.html">Add-ons</a>
            </li>
            <li role="menuitem" >
              <a href="../../../mobile.html">Mobile</a>
            </li>
            <li role="menuitem" >
              <a href="../../../tv.html">TV</a>
            </li>
            <li role="menuitem" >
              <a href="../../../labs.html">Labs</a>
            </li>
          </ul>
        </nav>
      </div>
      <nav id="subnav">
        <ul role="menu">
            <li role="menuitem"  class="selected">
              <a href="../../../addons/extensions/index.html">Opera 11-12 extensions</a>
            </li>
            <li role="menuitem" >
              <a href="http://dev.opera.com/extension-docs/">Opera 15+ extensions</a>
            </li>
            <li role="menuitem" >
              <a href="../../../addons/themes.html">Themes</a>
            </li>
        </ul>
      </nav>
    </header>
<section id="content" role="main" class="asideleft">
  <section class="main">
    <article lang="ru">
      <h1>Расширения для Opera: кнопки, бейджи и всплывающие окна</h1>
      <p class="print author">By George Drak</p>

      <p class="note">
From Opera 15 onward, Opera 11 &amp; 12’s extension format is no longer supported, and instead, we’ve switched to Chromium’s extension model. <strong>Check out <a href="http://dev.opera.com/extension-docs/">our new documentation for developing extensions for Opera 15 and higher</a></strong> and start building your own extensions.
</p>

<h2>Вступление</h2>

<p>Эта статья рассказывает о базовых шагах по созданию и управлению кнопками на панели браузера и различными их компонентами.</p>

<h2>Содержимое</h2>
<ul>
<li><a href="index.html#toolbar_buttons">Кнопки на панели браузера</a></li>
<li><a href="index.html#create_buttons">Создание кнопок</a></li>
<li><a href="index.html#adding_button">Добавление кнопки на панель браузера</a></li>
<li><a href="index.html#remove_button">Удаление кнопки с панели браузера</a></li>
<li><a href="index.html#create_popup">Создание всплывающего окна</a></li>
<li><a href="index.html#popup_contents">Содержимое всплывающего окна</a></li>
<li><a href="index.html#popup_dimensions">Размеры всплывающего окна</a></li>
<li><a href="index.html#creating_badge">Создание бейджа</a></li>
<li><a href="index.html#display_badge">Показ бейджа</a></li>
<li><a href="index.html#api">Ссылки на API</a></li>
</ul>

<h2 id="toolbar_buttons">Кнопки на панели браузера</h2>

<p>Расширение позволяет поместить одну кнопку на панель браузера Opera, справа от поля поиска. Кнопка может включать иконку размером 18×18 пикселов, подсказку (показывается при наведении), бейдж статуса и всплывающее окно.</p>

<h2 id="create_buttons">Создание кнопок</h2>

<p>Код создания кнопки должен быть добавлен в элемент <code>script</code> файла <code>index.html</code>. В этом примере мы выполняем код в момент срабатывания события <code>load</code>.</p>

<p>Первый шаг — это определение свойств кнопки. Сделать это можно с помощью объекта <code>ToolbarUIItemProperties</code>. Например:</p>

<pre><code>var ToolbarUIItemProperties = {
    disabled: false,
    title: &quot;Пример кнопки&quot;,
    icon: &quot;icons/button.png&quot;
}</code></pre>

<p>После того, как вы задали свойства кнопки в <code>ToolbarUIItemProperties</code>, вам необходимо создать собственно кнопку с помощью метода <code>createItem</code>:</p>

<pre><code>var theButton = opera.contexts.toolbar.createItem(ToolbarUIItemProperties);</code></pre>

<p>Всего, с помощью объекта <code>ToolbarUIItemProperties</code>, вы можете определить 5 свойств:</p>

<h3>disabled</h3>

<p>Определяет, активна ли кнопка. Значение по умолчанию — <code>true</code> (неактивна), принимает булево значение. Вы можете сделать кнопку неактивной следующим образом:</p>

<pre><code>theButton.disabled = true;</code></pre>

<h3>title</h3>

<p>Свойство <code>title</code> устанавливает подсказку, которая показывает при наведении пользователем курсора на кнопку.</p>

<pre><code>theButton.title = &quot;Это подсказка&quot;;</code></pre>

<h3>icon</h3>

<p>Свойство <code>icon</code> устанавливает иконку, которая используется кнопкой. Если вы укажете картинку размером отличную от 18×18 пикселов, то она будет автоматически отмасштабирована.</p>

<pre><code>theButton.icon = &quot;icons/beautiful-toobar-icon.png&quot;;</code></pre>

<h3>onclick</h3>

<p>Эта функция вызывается, когда пользователь кликает по кнопке и возбуждается событие <code>click</code>.</p>

<pre><code>theButton.onclick = function(){ /* do something */ };</code></pre>

<h3>onremove</h3>

<p>Эта функция вызывается, когда кнопка удаляется из <code>ToolbarContext</code> и вызывается событие <code>remove</code>.</p>

<pre><code>theButton.onremove = function(){ /* делаем что-нибудь */ };</code></pre>

<h2 id="adding_button">Добавление кнопки на панель браузера</h2>

<p>После создания кнопки нам необходимо поместить её на панель Opera. Сделаем это с помощью метода <code>addItem</code>:</p>

<pre><code>opera.contexts.toolbar.addItem(theButton);</code></pre>

<p>Пробуйте запустить <a href="../../../../devfiles.myopera.com/articles/3902/example-button.oex">пример</a>. Он не делает ничего особенного, так как вы ещё не определили никаких действий для кнопки.</p>

<h2 id="remove_button">Удаление кнопки с панели браузера</h2>

<p>Кнопка может быть удалена с панели браузера методом <code>removeItem</code>:</p>

<pre><code>opera.contexts.toolbar.removeItem(theButton);</code></pre>

<h2 id="create_popup">Создание всплывающего окна</h2>

<p>Теперь у вас есть кнопка, вы хотите, чтобы она что-нибудь умела. При клике на кнопку может быть показано всплывающее окно. Всплывающее окно это окно с указанными шириной и высотой. Вы можете подгружать в него страницы, находящиеся в сети или идущие прямо с вашим расширением.</p>

<p>Чтобы создать всплывающее окно, вам нужно определить свойства объекта <code>Popup</code> с помощью объекта <code>ToolbarUIItemProperties</code>:</p>

<pre><code>var ToolbarUIItemProperties = {
    disabled: false,
    title: &quot;Пример кнопки&quot;,
    icon: &quot;icons/button.png&quot;,
    popup: {
        href: &quot;popup.html&quot;,
        width: 300,
        height: 300
    }
}</code></pre>

<h2 id="popup_contents">Содержимое всплывающего окна</h2>

<p>Для указания содержимого всплывающего окна используется свойство <code>href</code>. Вы можете указать на любую страницу в сети, используя её абсолютный URL:</p>

<pre><code>theButton.popup.href = <a href="http://www.opera.com/" target="_blank">http://www.opera.com/&quot;;</a></code></pre>

<p>Так же вы можете подгрузить страницу, поставляющуюся с расширением, указав её относительный адрес:</p>

<pre><code>theButton.popup.href = &quot;popup.html&quot;;</code></pre>

<p>Эта страница может быть обычной HTML-страницей, никаких изменений вносить не нужно. Обратите внимание: если вы измените свойство <code>href</code>, в момент когда всплывающее окно открыто, то оно закроется.</p>

<h2 id="popup_dimensions">Размеры всплывающего окна</h2>

<p>Размеры всплывающего окна указываются в пикселах с помощью свойств <code>width</code> и <code>height</code>:</p>

<p>width:</p>
<pre><code>theButton.popup.width = 300;</code></pre>

<p>height:</p>
<pre><code>theButton.popup.height = 300;</code></pre>

<p>Всплывающее окно будет создано одновременно с кнопкой в момент вызова метода <code>createItem</code>.</p>

<p>Попробуйте пример <a href="../../../../devfiles.myopera.com/articles/3902/example-button-popup.oex">кнопки со всплывающим окном</a>. Если вы пробовали пример из статьи <a href="../opera-extensions-hello-world/index.html">Opera extensions hello world example</a>, то он покажется вам очень знакомым.</p>

<h2 id="creating_badge">Создание бейджа</h2>

<p>Бейдж это наложение поверх иконки кнопки с текстовым содержимым. Чаще всего они используются для показа количества чего-либо, например непрочитанных писем или сообщений. Чтобы создать бейдж, вам нужно определить свойства объекта <code>Badge</code> через объект <code>ToolbarUIItemProperties</code>:</p>

<pre><code>var ToolbarUIItemProperties = {
    disabled: false,
    title: &quot;Пример кнопки&quot;,
    icon: &quot;icons/button.png&quot;,
    badge: {
        display: &quot;block&quot;,
        textContent: &quot;12&quot;,
        color: &quot;white&quot;,
        backgroundColor: &quot;rgba(211, 0, 4, 1)&quot;
    }
}</code></pre>

<p>Бейдж имеет 4 свойства, которые могут быть настроены:</p>

<h2 id="display_badge">Показ бейджа</h2>

<p>Свойство <code>display</code> показывает и скрывает бейдж. Корректными значениями являются <code>block</code> и <code>none</code>. Значение по умолчанию: <code>none</code>. Сделать бейдж видимым можно так:</p>

<pre><code>theButton.badge.display = &quot;block&quot;;</code></pre>

<h3>textContent</h3>

<p>Текст бейджа может быть выставлен через свойство <code>textContent</code>. Бейдж имеет ограниченное место для отображения текста, поэтому постарайтесь быть лаконичными. </p>

<pre><code>theButton.badge.textContent = &quot;12&quot;;</code></pre>

<h3>color and backgroundColor</h3>

<p>Свойства <code>color</code> и <code>backgroundColor</code> устанавливают цвет текста и цвета фона бейджа. Они принимают значения в шестнадцатеричном (HEX) формате, RGBA и наименования цвета.</p>

<pre><code>theButton.badge.color = &quot;white&quot;;</code></pre>

<pre><code>theButton.badge.backgroundColor: = &quot;rgba(211, 0, 4, 1)&quot;;</code></pre>

<p>Вы можете попробовать пример <a href="../../../../devfiles.myopera.com/articles/3902/button-badge-popup.oex">кнопки с бейджем</a> и изучить различные пути создания и управления элементами пользовательского интерфейса расширений для Opera.</p>

<p>Вы можете обратиться к <a href="../../../addons/extensions/index.html#apireference">API расширений для Opera</a>, чтобы получить полную информацию о различных объектах и методах.</p>


      <p id="license" class="info">This article is licensed under a <a href="http://creativecommons.org/licenses/by-nc-sa/3.0/" rel="license">Creative Commons Attribution-Noncommercial-Share Alike 3.0 Unported</a> license.</p>

    </article>
<section id="comments">
  <h2>Comments</h2>
      <p class="info">The forum archive of this article is still available on <a href="http://my.opera.com/community/forums/topic.dml?id=787732">My Opera</a>.</p>
  <ul>
  </ul>
No new comments accepted.
</section>

  </section>

  <aside>
    <section class="info">
      <p class="author"><strong>Author</strong> <a href="../../../author/dstorey.html" rel="author">David Storey</a></p>
      <p class="author"><strong>Translator</strong> <a href="../../../author/SonicGD.html" rel="author">George Drak</a></p>
      <p>
        <strong>Date</strong>
        Friday, October 29, 2010
      </p>

      <p class="tags"><strong>Tags</strong></p>
      <ul class="tags">
        <li><a href="../../tags/badges.html" rel="tag">badges</a></li>
        <li><a href="../../tags/buttons.html" rel="tag">buttons</a></li>
        <li><a href="../../tags/javascript.html" rel="tag">javascript</a></li>
        <li><a href="../../tags/opera&#32;extensions.html" rel="tag">opera extensions</a></li>
        <li><a href="../../tags/popups.html" rel="tag">popups</a></li>
      </ul>
      <p><strong>Languages</strong>
        <a href="../opera-extensions-buttons-badges-and-popups/index.html">English</a>,
        <a href="../opera-extensions-buttons-badges-and-popups-ja/index.html">Japanese</a>
      </p>
    </section>
  </aside>




</section>
<script type="text/javascript" src="../../../../static.myopera.com/dev/js/highlight.pack.js"></script>
<script type="text/javascript">hljs.initHighlightingOnLoad();</script>

    <footer>
      <section role="contentinfo">
        <ul>
          <li><a href="../../../help.html">Help/<abbr>FAQ</abbr></a>
          <li><a href="http://my.opera.com/community/terms-of-service/?utm_source=devopera&amp;utm_medium=footer&amp;utm_campaign=devlinks">Terms of service</a>
          <li><a href="../../../privacy.html">Privacy</a>
        </ul>
      </section>
    </footer>
  </body>
</html>
