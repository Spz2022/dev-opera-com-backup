<!DOCTYPE html>
<html lang="en">
  <head>
    <title>WCL developer guide - Dev.Opera</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="google-site-verification" content="L7q_7GF5c9d7ZAUYdfaTiRaB6sTAGv_cRz3nq5DsabM">
    <meta name="description" content="Dev.Opera is the ultimate source of distilled knowledge for web developers, covering the latest open web technologies and techniques including HTML5, CSS3, JavaScript, SVG, optimizing content for mobiles, tablets and TVs, and creating add-ons such as extensions and themes for the Opera browser.">
    <meta name="keywords" content="Opera, web, HTML5, HTML, CSS3, CSS, JavaScript, SVG, Geolocation, Widgets, Extensions, Unite, Mini, Mobile, web development, design, web design, tutorials, articles, examples, demos, web standards, open standards, open web, video, audio, getusermedia, accessibility, wai-aria, transitions, translations, microformats, microdata, dataset, media queries, viewport, @viewport, transparency, opacity, gradients, box-shadow, text-shadow, web fonts, appcache, websql, local storage, ajax, json, games, userjs, webgl, tv, tablet, emulator, skinning, themes, skins, drasgonfly, mathml, web sockets, operawatir">
    <link rel="icon" href="../../../../static.myopera.com/dev/img/speed_dial-icon.png" type="image/png">
    <link rel="apple-touch-icon" href="../../../../static.myopera.com/dev/img/touch-icon.png" type="image/png">
    <link rel="shortcut icon" href="../../../favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="../../../../static.myopera.com/dev/css/devopera.css" type="text/css">
    <!--[if IE 6]><link rel="stylesheet" href="/css/browsers/ie6.css" type="text/css"><![endif]-->
    <!--[if IE 7]><link rel="stylesheet" href="/css/browsers/ie7.css" type="text/css"><![endif]-->
    <!--[if IE 8]><link rel="stylesheet" href="/css/browsers/ie8.css" type="text/css"><![endif]-->
    <!--[if lte IE 8]><script type="text/javascript" src="/js/ie.js"></script><![endif]-->
    <link rel="stylesheet" href="../../../../static.myopera.com/dev/css/articles.css">
    <link rel="stylesheet" media="print" href="../../../../static.myopera.com/dev/css/print.css">
    <link rel="stylesheet" href="../../../../static.myopera.com/dev/css/github.css">
    <link rel="alternate" type="application/rss+xml" title="Recent articles - RSS 2.0 Feed" href="../../../feeds/rss/articles">
    <link rel="alternate" type="application/atom+xml" title="Recent articles - Atom 1.0 Feed" href="../../../feeds/atom/articles">
    <link rel="alternate" type="application/rss+xml" title="Recent articles in Add-ons - RSS 2.0 Feed" href="../../../feeds/rss/articles/addons">
    <link rel="alternate" type="application/atom+xml" title="Recent articles in Add-ons - Atom 1.0 Feed" href="../../../feeds/atom/articles/addons">
    <link rel="alternate" type="application/rss+xml" title="Recent articles in Widgets - RSS 2.0 Feed" href="../../../feeds/rss/articles/addons/widgets">
    <link rel="alternate" type="application/atom+xml" title="Recent articles in Widgets - Atom 1.0 Feed" href="../../../feeds/atom/articles/addons/widgets">
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script type="text/javascript" src="../../../../static.myopera.com/dev/js/menu.js"></script>
    <noscript>
      <style type="text/css">
.collection ul li ul {
    display: inherit !important;
}
      </style>
    </noscript>
    <script type="text/javascript">
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-4118503-4']);
_gaq.push(['_gat._anonymizeIp']);
_gaq.push(['_trackPageview']);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();
    </script>

  </head>
  <body class="widgets">
    <header role="banner"  class="article-view" >
      <div>
        <a href="../../../index.html" id="logo">Dev.Opera</a>
        <form action="http://dev.opera.com/search" role="search">
          <fieldset>
            <label class="hidden" for="q">Search</label>
            <input type="text" name="q" maxlength="256" value="" id="q" required>
            <input type="submit" id="q-submit" value="Search" title="Search">
          </fieldset>
        </form>
        <p id="login">
          <a href="../../../../../https/dev.opera.com/login/index.html" accesskey="L" title="Log in">Log in</a>
        </p>
        <nav id="nav">
          <ul role="menu">

            <li role="menuitem" >
              <a href="../../../web.html">Web</a>
            </li>
            <li role="menuitem"  class="selected">
              <a href="../../../addons.1.html">Add-ons</a>
            </li>
            <li role="menuitem" >
              <a href="../../../mobile.html">Mobile</a>
            </li>
            <li role="menuitem" >
              <a href="../../../tv.html">TV</a>
            </li>
            <li role="menuitem" >
              <a href="../../../labs.html">Labs</a>
            </li>
          </ul>
        </nav>
      </div>
      <nav id="subnav">
        <ul role="menu">
            <li role="menuitem" >
              <a href="../../../addons/extensions/index.html">Opera 11-12 extensions</a>
            </li>
            <li role="menuitem" >
              <a href="http://dev.opera.com/extension-docs/">Opera 15+ extensions</a>
            </li>
            <li role="menuitem" >
              <a href="../../../addons/themes.html">Themes</a>
            </li>
        </ul>
      </nav>
    </header>
<section id="content" role="main" class="asideleft">
  <section class="main">
    <article lang="en">
      <h1>WCL developer guide</h1>
      <p class="print author">By Opera Software</p>

      <div class="note">
<h2 style="color:red;font-weight:bold;padding-top:0;margin-top:0;">24th April 2012: Please note</h2>

<p>Starting with Opera 12, Opera Widgets will <a href="http://my.opera.com/ODIN/blog/2012/04/24/end-unite-apps-and-widgets">be turned off for new users and completely removed in a later release</a>. If you&#39;re interested in building addons for Opera, we recommend going with our extensions platform — check out <a href="../../../addons/extensions/index.html">our extensions documentation</a> to get started.</p>
</div>

<h3>Contents</h3>

<ol class="toc">
    <li><a href="index.html#Introduction">Introduction</a></li>
    <li><a href="index.html#BasicConcepts">Creating a widget with WCL</a></li>
    <li><a href="index.html#SwitchingSkins">Switching skins</a></li>
    <li><a href="index.html#ApiMethods">WCL API methods and events</a></li>
    <li><a href="index.html#AddingContent">Adding more content</a></li>
    <li><a href="index.html#WorkChrome">Working with chrome</a></li>
    <li><a href="index.html#WCLEvents">Managing WCL button events</a></li>
    <li><a href="index.html#WCLResize">Resizing the widget using WCL</a></li>
</ol>

<a name="Introduction" id="Introduction"></a>
<h3>Introduction</h3>
<p>
    Opera provides a library for the simple creation of chrome for widgets.
    This library makes it relatively painless to reuse code for widgets
    of different resolutions, defining different styles for each. The
    example widgets work identically on both portrait and landscape modes
    on a mobile device and on a desktop computer. The only difference is the
    style sheet that is applied. The library also manages resizing of
    widgets, so authors do not have to implement this themselves in every
    widget. On mobile devices it’s best to <a href="../cross-device-development-techniques-for/index.html#layoutfullscreen">enable  full-screen
    mode</a> to take full advantage of the available screen.
</p>

<a name="BasicConcepts" id="BasicConcepts"></a>
<h3>Creating a widget with the WCL</h3>
<p>
    A bare bones widget that uses WCL could look like this:
</p>
<pre class="examplecode"><code>&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;Hello World&lt;/title&gt;
    &lt;script type=&quot;text/javascript&quot; src=&quot;scripts/chrome.js&quot;&gt;&lt;/script&gt;
    &lt;link href=&quot;basic.skin/skin.css&quot; rel=&quot;stylesheet&quot; type=&quot;text/css&quot; media=&quot;screen&quot; /&gt;
&lt;/head&gt;
&lt;body&gt;
    This is the content body
&lt;/body&gt;
&lt;/html&gt;</code></pre>

<p>
    The basic skin and the chrome.js files are provided by Opera. Developers
    are free to modify them as needed and to add more skins.
</p>
<p>
    When the widget starts, the chrome.js file creates the extra markup
    needed for the chrome. The chrome consists of a top bar, bottom bar, event handlers
    for resizing and buttons for config and close. The above code would
    produce this screenshot with the default skin:</p>

<p><img src="../../../../devfiles.myopera.com/articles/448/hello_world.png" alt="Screenshot of Hello World example" /></p>


<a name="SwitchingSkins" id="SwitchingSkins"></a>
<h3>Switching skins</h3>
<p>
    You can have as many skins as you like for any WCL widget by  adding  elements for external style sheets
    with the type “alternate stylesheet” and a title. Alternate style sheets
    are not automatically applied when the page loads. A simple example
    could look like this:
</p>

<pre class="examplecode"><code>&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;Hello World&lt;/title&gt;
    &lt;script type=&quot;text/javascript&quot; src=&quot;scripts/chrome.js&quot;&gt;&lt;/script&gt;
    &lt;link title=&quot;basicskin&quot; href=&quot;basic.skin/skin.css&quot; rel=&quot;stylesheet&quot; type=&quot;text/css&quot; media=&quot;screen&quot; /&gt;
    &lt;link title=&quot;fancyskin&quot; href=&quot;fancy.skin/skin.css&quot; rel=&quot;alternate stylesheet&quot; type=&quot;text/css&quot; media=&quot;screen&quot; /&gt;
    &lt;script&gt;
        window.onload = function() {
            // check the size of the viewport and switch skin if
            // it is big enough
            if (window.innerWidth&gt;340) {
                // disable current stylesheet
                WidgetChrome.disableStylesheet(&quot;basicskin&quot;);

                // enable the fancy skin
                WidgetChrome.enableStyleSheet(&quot;fancyskin&quot;);
            }
        }
    &lt;/script&gt;

&lt;/head&gt;
&lt;body&gt;
    This is the content body
&lt;/body&gt;
&lt;/html&gt;</code></pre>
    <p>We disable the <em>basicskin</em> so that all styles specified in that skin are removed and then we apply the <em>fancyskin</em>. </p>

<a name="ApiMethods" id="ApiMethods"></a>
<h3>WCL API methods and events</h3>

<p>The WCL API is available at <a href="../../../libraries/chrome/docs/WidgetChrome.dml.html">http://dev.opera.com/libraries/chrome/docs/WidgetChrome.dml/</a>.</p>

<a name="AddingContent" id="AddingContent"></a>
<h3>Adding more content</h3>
<p>When you add WCL to your widget, it takes all the content from the body and places it inside the chrome. When you want to add or remove content from the
elements, there are no special rules that you need to follow. As long as you are using IDs to get the elements, you can add and remove elements as you would
normally do without using WCL. For example, if there is a <strong>DIV</strong> with id <em>test</em> you can still use <code>document.getElementById(&quot;test&quot;)</code>
 as  normal.</p>
<p>There are times when you want an element to use all the available area inside the widget. You can use the helper
function <code>WidgetChrome.autoResize</code> to help you resize the element to occupy the complete section in the middle and to resize automatically as the widget
is resized. </p>
<p>
<strong>Example</strong>: There is a <strong>DIV</strong> with the id <em>pnlConfig</em>. To make sure that it resizes and takes up all the available area
and resizes automatically, we use the helper function <code>WidgetChrome.autoResize(<strong>&quot;pnlConfig&quot;</strong>);</code> in the onload event.</p>

<a name="WorkChrome" id="WorkChrome"></a>
<h3>Working with chrome</h3>
<p>There are times when you want to customize elements in the chrome. </p>
<p>Lets start with elements that you don’t want to add. Add the attribute <code>data-not-chrome-content=&quot;true&quot;</code> to those elements. The elements with
this attribute will not be added inside the widget chrome.</p>

<h4>Example</h4>
<pre><code>&lt;div data-not-chrome-content=&quot;true&quot;&gt; &lt;/div&gt; </code></pre>
<p>To add extra elements to the chrome, such as  another button, use the
API <code>WidgetChrome.addElementToChrome</code>. </p>

<h4>HTML example</h4>
<p><code>&lt;button id=&quot;btnMinimise&quot; data-not-chrome-content=&quot;true&quot;&gt;Minimise&lt;/button&gt;</code></p>
<h4>JavaScript example</h4>
<p><code>WidgetChrome.addElementToChrome(&quot;btnMinimise&quot;);</code></p>


<p>
  We make sure that the element is not added inside the chrome by setting <code>data-not-chrome-content=&quot;true&quot;</code>. On the onload event, we call the function to add the button to the
chrome. Once you put the button into the chrome, you must still  position it with CSS.
</p>

<a name="WCLEvents" id="WCLEvents"></a>
<h3>Managing WCL button events</h3>
<p> There is only one event <code>WidgetChrome.ButtonConfig.onclick</code> that you need to handle if you use WidgetChrome. If you want to handle the
event when a user clicks the close button, you need to load the function <code>WidgetChrome.ButtonClose.onclick</code>.</p>

<pre>WidgetChrome.ButtonConfig.onclick = function(event)
{
    //Do something when the config button clicked.
}

WidgetChrome.ButtonClose.onclick = function(event)
{
    //Do something when the close button is clicked.
}</pre>

<p>You can also use <strong>addEventListener</strong>. You can get the reference to the button elements and use addEventListener on them.
<strong>WidgetChrome.ButtonConfig</strong> will give the reference to the config button, and <strong>WidgetChrome.ButtonClose</strong>
will give the reference to the close button. </p>

<pre>WidgetChrome.ButtonClose.addEventListener(&quot;click&quot;, function() {
    window.close();
}, false);</pre>

<p>If you don&#39;t need the config button, you can use the following methods to hide the button:</p>

<dl>
  <dt>Using <em>CSS</em></dt>
  <dd><code>#btnConfig { display: none; } </code></dd>
  <dt>Using <em>JavaScript</em></dt>
  <dd><code>WidgetChrome.ButtonConfig.style.display = &quot;none&quot;;</code></dd>
</dl>

<a name="WCLResize" id="WCLResize"></a>
<h3>Resizing the widget using WCL</h3>
<p> To resize a widget, call <strong>window.resizeTo</strong>&#8212; then, call <strong>WidgetChrome.redraw()</strong> so that
the chrome is repainted.</p>
<p>If you want to make a widget fullscreen, you can use the helper function <strong>WidgetChrome.setFullScreen()</strong>.</p>
<p>
    You can set the minimum height and width of the widget using <strong>WidgetChrome.minHeight</strong> and <strong>WidgetChrome.minWidth</strong>.
    By default, the minimum width is 50px and height is set to 100px, so that a user doesn&#39;t  resize it and make the widget unusable.
</p>
none

      <p id="license" class="info">This article is licensed under a <a href="http://creativecommons.org/licenses/by-nc-nd/2.5/" rel="license">Creative Commons Attribution, Non Commercial - No Derivs 2.5</a> license.</p>

    </article>
<section id="comments">
  <h2>Comments</h2>
      <p class="info">The forum archive of this article is still available on <a href="http://my.opera.com/community/forums/topic.dml?id=246953">My Opera</a>.</p>
  <ul>
  </ul>
No new comments accepted.
</section>

  </section>

  <aside>
    <section class="info">
      <p class="author"><strong>Author</strong> <a href="../../../author/operadev.html" rel="author">Opera Software</a></p>
      <p>
        <strong>Date</strong>
        Thursday, August 21, 2008
      </p>

    </section>
  </aside>




<aside>
  <section class="collection">
<h2><a href="http://dev.opera.com/articles/view">Opera Widgets SDK</a></h2>

<ul >
  <li class="sub-collection parent-collection">
<span ></span>Getting started<ul >
  <li class="sub-collection leaf">
<a href="../creating-your-first-opera-widget/index.html" >Creating your first Opera widget</a>

</li>
  <li class="sub-collection leaf">
<a href="../packing-and-deploying-your-opera-widget/index.html" >Packing and deploying your Opera Widget</a>

</li>
  <li class="sub-collection leaf">
<a href="../opera-widgets-preference-store/index.html" >Opera Widgets Preference Store</a>

</li>
  <li class="sub-collection leaf">
<a href="../opera-widgets-and-ajax-connecting-to-mu/index.html" >Opera Widgets and Ajax: connecting to multiple servers</a>

</li>
</ul>
</li>
  <li class="sub-collection parent-collection">
<span ></span>Widgets on Mobile<ul >
  <li class="sub-collection leaf">
<a href="../mobile-widget-development-process-advice/index.html" >Mobile widget development process advice</a>

</li>
  <li class="sub-collection leaf">
<a href="../the-opera-widgets-mobile-emulator/index.html" >The Opera Widgets Mobile Emulator</a>

</li>
  <li class="sub-collection leaf">
<a href="../characteristics-of-widgets-on-mobile-pho/index.html" >Characteristics of widgets on mobile phones</a>

</li>
  <li class="sub-collection leaf">
<a href="../adding-a-docked-mode-to-your-widgets/index.html" >Adding a docked mode to your widgets</a>

</li>
  <li class="sub-collection leaf">
<a href="../remote-debugging-of-widgets-on-mobile-devices/index.html" >Remote debugging of widgets on mobile devices</a>

</li>
</ul>
</li>
  <li class="sub-collection parent-collection">
<span ></span>Widgets on Desktop<ul >
  <li class="sub-collection leaf">
<a href="../the-opera-widgets-runtime-for-desktop/index.html" >The Opera Widgets runtime for Desktop</a>

</li>
</ul>
</li>
  <li class="sub-collection parent-collection">
<span ></span>Appendix 1: Other Resources<ul >
  <li class="sub-collection leaf">
<a href="../opera-widgets-style-guide/index.html" >Opera Widgets Style Guide</a>

</li>
  <li class="sub-collection leaf">
<a href="../opera-widget-support-notes/index.html" >Opera Widget support notes</a>

</li>
  <li class="sub-collection leaf">
<a href="../cross-device-development-techniques-for/index.html" >Cross-device development techniques for widgets</a>

</li>
  <li class="sub-collection leaf">
<a href="../widget-modes-docked-widget-and-more/index.html" >Widget modes: docked, widget, and more</a>

</li>
  <li class="sub-collection leaf">
<a href="../optimizing-opera-widget-graphics-for-mob/index.html" >Optimizing widget graphics for mobile and devices</a>

</li>
  <li class="sub-collection leaf">
<a href="../custom-opera-widget-icons/index.html" >Widget icon tutorial</a>

</li>
  <li class="sub-collection leaf">
<a href="../icon-creator-tutorial/index.html" >Icon Creator tutorial</a>

</li>
  <li class="sub-collection leaf">
<a href="../html5-audio-radio-player/index.html" >An HTML5 &lt;audio&gt; radio player</a>

</li>
  <li class="sub-collection leaf">
<a href="../introduction-to-opera-dragonfly/index.html" >Introduction to Opera Dragonfly</a>

</li>
</ul>
</li>
  <li class="sub-collection parent-collection">
<span ></span>Appendix 2: APIs and Specifications<ul >
  <li class="sub-collection leaf">
<a href="../opera-widgets-core-dom-reference/index.html" >Opera Widgets - core DOM reference</a>

</li>
  <li class="sub-collection leaf">
<a href="../opera-widgets-security-model/index.html" >Opera Widgets security model</a>

</li>
  <li class="sub-collection leaf">
<a href="../file-i-o-api-for-widgets/index.html" >File I/O API</a>

</li>
  <li class="sub-collection leaf">
<a href="../hello-animation/index.html" >Hello Animation!</a>

</li>
  <li class="sub-collection leaf">
<a href="index.html"  class="current">WCL developer guide</a>

</li>
</ul>
</li>
</ul>
  </section>

<script type="text/javascript">
$(document).ready(function() {
    // Add .current to all .sub-collections above the current .current
    $('.sub-collection:has(.current)').addClass('current');

    // Iterate over all .sub-collections
    $('.sub-collection').each(function() {
        var subCollectionUl = $(this).children('ul')
          , subCollectionExpander = $(this).children('span');

        if (subCollectionUl) {
            // Add special CSS rules for parent nodes that should be expandable
            if (!subCollectionUl.hasClass('root') ||
                subCollectionUl.css('display') === 'none') {

                // If the node has the .current class, it is per definition shown
                if ($(this).hasClass('current')) {
                    $(this).addClass('collection-shown');
                }
                // Otherwise, show the node as expandable
                else {
                    subCollectionExpander.toggleClass('expandable');
                    subCollectionUl.css('display', 'none');
                }
            }

            // Add a onclick hook to the expander
            subCollectionExpander.click(function() {
                var currentDisplay = subCollectionUl.css('display');

                // Toggle appropriate classes
                $(this).toggleClass('descendant');
                $(this).toggleClass('expandable');

                // Toggle visibility and appropriate class to parent node
                subCollectionUl.css('display', currentDisplay === 'none' ? 'inherit' : 'none');
                $(this).parent().toggleClass('collection-shown', currentDisplay === 'none');
            });
        }
    });
});
</script>
</aside>
</section>
<script type="text/javascript" src="../../../../static.myopera.com/dev/js/highlight.pack.js"></script>
<script type="text/javascript">hljs.initHighlightingOnLoad();</script>

    <footer>
      <section role="contentinfo">
        <ul>
          <li><a href="../../../help.html">Help/<abbr>FAQ</abbr></a>
          <li><a href="http://my.opera.com/community/terms-of-service/?utm_source=devopera&amp;utm_medium=footer&amp;utm_campaign=devlinks">Terms of service</a>
          <li><a href="../../../privacy.html">Privacy</a>
        </ul>
      </section>
    </footer>
  </body>
</html>
