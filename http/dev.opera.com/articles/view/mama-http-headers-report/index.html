<!DOCTYPE html>
<html lang="en">
  <head>
    <title>MAMA: HTTP headers report - Dev.Opera</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="google-site-verification" content="L7q_7GF5c9d7ZAUYdfaTiRaB6sTAGv_cRz3nq5DsabM">
    <meta name="description" content="Dev.Opera is the ultimate source of distilled knowledge for web developers, covering the latest open web technologies and techniques including HTML5, CSS3, JavaScript, SVG, optimizing content for mobiles, tablets and TVs, and creating add-ons such as extensions and themes for the Opera browser.">
    <meta name="keywords" content="Opera, web, HTML5, HTML, CSS3, CSS, JavaScript, SVG, Geolocation, Widgets, Extensions, Unite, Mini, Mobile, web development, design, web design, tutorials, articles, examples, demos, web standards, open standards, open web, video, audio, getusermedia, accessibility, wai-aria, transitions, translations, microformats, microdata, dataset, media queries, viewport, @viewport, transparency, opacity, gradients, box-shadow, text-shadow, web fonts, appcache, websql, local storage, ajax, json, games, userjs, webgl, tv, tablet, emulator, skinning, themes, skins, drasgonfly, mathml, web sockets, operawatir">
    <link rel="icon" href="../../../../static.myopera.com/dev/img/speed_dial-icon.png" type="image/png">
    <link rel="apple-touch-icon" href="../../../../static.myopera.com/dev/img/touch-icon.png" type="image/png">
    <link rel="shortcut icon" href="../../../favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="../../../../static.myopera.com/dev/css/devopera.css" type="text/css">
    <!--[if IE 6]><link rel="stylesheet" href="/css/browsers/ie6.css" type="text/css"><![endif]-->
    <!--[if IE 7]><link rel="stylesheet" href="/css/browsers/ie7.css" type="text/css"><![endif]-->
    <!--[if IE 8]><link rel="stylesheet" href="/css/browsers/ie8.css" type="text/css"><![endif]-->
    <!--[if lte IE 8]><script type="text/javascript" src="/js/ie.js"></script><![endif]-->
    <link rel="stylesheet" href="../../../../static.myopera.com/dev/css/articles.css">
    <link rel="stylesheet" media="print" href="../../../../static.myopera.com/dev/css/print.css">
    <link rel="stylesheet" href="../../../../static.myopera.com/dev/css/github.css">
    <link rel="alternate" type="application/rss+xml" title="Recent articles - RSS 2.0 Feed" href="../../../feeds/rss/articles">
    <link rel="alternate" type="application/atom+xml" title="Recent articles - Atom 1.0 Feed" href="../../../feeds/atom/articles">
    <link rel="alternate" type="application/rss+xml" title="Recent articles in Web - RSS 2.0 Feed" href="../../../feeds/rss/articles/web">
    <link rel="alternate" type="application/atom+xml" title="Recent articles in Web - Atom 1.0 Feed" href="../../../feeds/atom/articles/web">
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script type="text/javascript" src="../../../../static.myopera.com/dev/js/menu.js"></script>
    <noscript>
      <style type="text/css">
.collection ul li ul {
    display: inherit !important;
}
      </style>
    </noscript>
    <script type="text/javascript">
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-4118503-4']);
_gaq.push(['_gat._anonymizeIp']);
_gaq.push(['_trackPageview']);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();
    </script>

  </head>
  <body class="web">
    <header role="banner"  class="article-view" >
      <div>
        <a href="../../../index.html" id="logo">Dev.Opera</a>
        <form action="http://dev.opera.com/search" role="search">
          <fieldset>
            <label class="hidden" for="q">Search</label>
            <input type="text" name="q" maxlength="256" value="" id="q" required>
            <input type="submit" id="q-submit" value="Search" title="Search">
          </fieldset>
        </form>
        <p id="login">
          <a href="../../../../../https/dev.opera.com/login/index.html" accesskey="L" title="Log in">Log in</a>
        </p>
        <nav id="nav">
          <ul role="menu">

            <li role="menuitem"  class="selected">
              <a href="../../../web.html">Web</a>
            </li>
            <li role="menuitem" >
              <a href="../../../addons.1.html">Add-ons</a>
            </li>
            <li role="menuitem" >
              <a href="../../../mobile.html">Mobile</a>
            </li>
            <li role="menuitem" >
              <a href="../../../tv.html">TV</a>
            </li>
            <li role="menuitem" >
              <a href="../../../labs.html">Labs</a>
            </li>
          </ul>
        </nav>
      </div>
    </header>
<section id="content" role="main" class="asideleft">
  <section class="main">
    <article lang="en">
      <h1>MAMA: HTTP headers report</h1>
      <p class="print author">By Brian Wilson</p>

      <h1></h1>

<h2>Introduction</h2>

<p>Before we start discussing the main part of MAMA&#39;s results on markup, CSS, and 
   script, we need to start at the logical beginning of our story. Any page that a 
   browser displays begins with a HTTP transaction. The requester asks a Web 
   server for a document, and the server responds with important meta-information 
   about the HTTP transaction response before moving forward and delivering the bulk 
   of the response&#8212;the document itself. This HTTP response contains many items 
   worth examining. Some may consider this topic dull&#8212; it is an easy claim 
   to make that most authors will never have a need to know about the details of the 
   HTTP transport layer in the process of writing their documents. However, it all 
   starts with the HTTP headers&#8212; it is the basis for all the rest that follows 
   and is critical for us to look at to produce a cohesive exploration of Web 
   documents.</p>

<p>Read the first report in the series - <a href="../mama-markup-validation-report/index.html">MAMA: Markup validation report</a> - if you haven&#39;t already done so. For more on MAMA, check out the <a href="../mama/index.html">MAMA homepage</a>. For more on HTTP headers, check out the <a href="../mama-http-headers/index.html">full HTTP header results</a>.</p>

<h2>MAMA&#39;s HTTP request headers</h2>

<p>We must first look at MAMA&#39;s HTTP request headers before looking at how Web 
   servers responded to MAMA. The initial HTTP request is the first link in the 
   chain, and it shapes much of what follows. For this study, MAMA tried to 
   experience the Web as closely as possible to how Opera would experience it.
   Of particular interest is MAMA&#39;s User-Agent string:</p>

<table cellspacing="0" cellpadding="3">
<caption class="comment" style="caption-side: bottom">MAMA&#39;s HTTP request headers</caption>
   <tr><th>Header name</th><th>Header value</th></tr> 
   <tr class="r1">
     <td><code class="skeyw">Accept</code></td>
     <td><span class="string">&quot;text/html, application/xml;q=0.9, application/xhtml+xml, 
         image/png, image/jpeg, image/gif, image/x-xbitmap, */*;q=0.1&quot;</span></td>
   </tr>
   <tr class="r2">
     <td><code class="skeyw">Accept-Charset</code></td>
     <td><span class="string">&quot;windows-1252, utf-8, utf-16, iso-8859-1;q=0.6, *;q=0.1&quot;</span></td>
   </tr>
   <tr class="r1">
     <td><code class="skeyw">Accept-Encoding</code></td>
     <td><span class="string">&quot;identity, *;q=0&quot;</span></td>
   </tr>
   <tr class="r2">
     <td><code class="skeyw">Accept-Language</code></td>
     <td><span class="string">&quot;en&quot;</span></td>
   </tr>
   <tr class="r1">
     <td><code class="skeyw">Connection</code></td>
     <td><span class="string">&quot;Keep-Alive&quot;</span></td>
   </tr>
   <tr class="r2">
     <td><code class="skeyw">User-Agent</code></td>
     <td><span class="string">&quot;Opera/9.10 (Windows NT 5.1; U; en)&quot;</span></td>
   </tr>
</table>

<p class="note"><strong>Note:</strong> The <code class="skeyw">Accept-Language</code> 
   and <code class="skeyw">Accept-Charset</code> values chosen reflect the author&#39;s 
   own particular language bias. This can have an affect on what is served in the 
   HTTP response.</p>

<h2 id="anatomy">The HTTP Response&#8212; general anatomy</h2>
<p>The HTTP response block consists of a &quot;status line&quot; followed by any number 
   of newline-separated header field/value pairs. HTTP/1.1 
   (<a href="http://www.ietf.org/rfc/rfc2616.txt">RFC 2616</a>) provides 
   considerable detail about the anatomy of an HTTP response, but in this 
   overview we will only examine some of its most popular field/value components.
   The format that HTTP header name/value pairs follows is generally:</p>

   <p class="note">[Field Name (case-insensitive)]: [Field Value]</p>

<h2>HTTP header response fields</h2>

<p>First we will take a look at the most popular HTTP header fields in MAMA&#39;s URL set. 
   Three fields were found to be nearly universal: <code class="skeyw">Content-Type</code> 
   (the MIME type of the document), <code class="skeyw">Date</code> (the date of the HTTP 
   transaction) and <code class="skeyw">Server</code> (information about the Web server 
   sending the HTTP response).</p>

<table cellspacing="0" cellpadding="3">
<caption class="comment" style="caption-side: bottom"> 
   Most popular HTTP header fields (top 10)</caption>
   <tr>
     <th>Header name</th>
     <th>Quantity</th>
     <th>Percentage</th>
     <th rowspan="6">&#xA0;</th>
     <th>Header name</th>
     <th>Quantity</th>
     <th>Percentage</th>
   </tr> 
   <tr class="r1">
     <td><code class="skeyw">Content-Type</code></td>
     <td class="num">3,508,919</td>
     <td class="num">100.0%</td>
     <td><code class="skeyw">Last-Modified</code></td>
     <td class="num">2,129,100</td>
     <td class="num">60.7%</td>
   </tr>
   <tr class="r2">
     <td><code class="skeyw">Date</code></td>
     <td class="num">3,504,603</td>
     <td class="num">99.9%</td>
     <td><code class="skeyw">Content-Range</code></td>
     <td class="num">2,068,687</td>
     <td class="num">59.0%</td>
   </tr>
   <tr class="r1">
     <td><code class="skeyw">Server</code></td>
     <td class="num">3,465,179</td>
     <td class="num">98.8%</td>
     <td><code class="skeyw">ETag</code></td>
     <td class="num">1,954,567</td>
     <td class="num">55.7%</td>
   </tr>
   <tr class="r2">
     <td><code class="skeyw">Connection</code></td>
     <td class="num">2,851,099</td>
     <td class="num">81.3%</td>
     <td><code class="skeyw">Accept-Ranges</code></td>
     <td class="num">1,870,170</td>
     <td class="num">53.3%</td>
   </tr>
   <tr class="r1">
     <td><code class="skeyw">Content-Length</code></td>
     <td class="num">2,534,203</td>
     <td class="num">72.2%</td>
     <td><code class="skeyw">X-Powered-By</code></td>
     <td class="num">1,348,347</td>
     <td class="num">38.4%</td>
   </tr>
</table>

<p>Although many of the other HTTP header fields are not as ubiquitous as the 
   top 3, we can see from the top 10 that many other headers are used <strong>VERY</strong> 
   frequently. The average is 9 fields for an HTTP header.</p>

<table cellspacing="0" cellpadding="3">
<caption class="comment" style="caption-side: bottom"> 
   Popularity of HTTP header field quantity (top 10)</caption>
   <tr>
     <th>Number<br />of fields</th>
     <th>Quantity</th>
     <th>Percentage</th>
   </tr>
   <tr class="r1">
     <td>9</td>
     <td class="num">1,601,744</td>
     <td class="num">45.6%</td>
   </tr>
   <tr class="r2">
     <td>10</td>
     <td class="num">377,903</td>
     <td class="num">10.8%</td>
   </tr>
   <tr class="r1">
     <td>7</td>
     <td class="num">373,266</td>
     <td class="num">10.6%</td>
   </tr>
   <tr class="r2">
     <td>6</td>
     <td class="num">327,701</td>
     <td class="num">9.3%</td>
   </tr>
   <tr class="r1">
     <td>8</td>
     <td class="num">307,215</td>
     <td class="num">8.8%</td>
   </tr>
   <tr class="r2">
     <td>5</td>
     <td class="num">196,896</td>
     <td class="num">5.6%</td>
   </tr>
   <tr class="r1">
     <td>11</td>
     <td class="num">160,630</td>
     <td class="num">4.6%</td>
   </tr>
   <tr class="r2">
     <td>12</td>
     <td class="num">82,386</td>
     <td class="num">2.4%</td>
   </tr>
   <tr class="r1">
     <td>13</td>
     <td class="num">33,923</td>
     <td class="num">1.0%</td>
   </tr>
   <tr class="r2">
     <td>4</td>
     <td class="num">15,652</td>
     <td class="num">0.5%</td>
   </tr>
</table>

<p>The average length of a typical HTTP header in MAMA&#39;s URL set is 381 characters. 
   The smallest HTTP header block encountered was 66 characters, while the longest
   found was 9,725 characters.</p>

<h2><code class="skeyw">Content-Type</code> HTTP header &quot;charset&quot; value</h2>

<p>While the purpose of the <code class="skeyw">Content-Type</code> header to 
   describe a document&#39;s MIME type is naturally ubiquitous, MAMA&#39;s URL selection 
   process eliminated MIME types that it could not analyze. The URLs that MAMA 
   surveyed were almost all <span class="string">&quot;text/html&quot;</span>, but other values were also encountered.</p>

<p>One optional portion of the <code class="skeyw">Content-Type</code> header 
   field does deserve some extra scrutiny. It is the <span class="string">&quot;Charset&quot;</span> 
   parameter, found in 688,819 of MAMA&#39;s URLs (19.6%):</p>

<p class="note"><strong>Ex:</strong> <code class="skeyw">Content-Type</code>: <span class="string">text/html; charset=utf-8</span></p>

<p>The charset field describes the encoding used for the document. Two values are 
   dominant and roughly equal here&#8212;<span class="string">&quot;utf-8&quot;</span> and 
   <span class="string">&quot;iso-8859-1&quot;</span>, with the former value having the slight edge.</p>

<table cellspacing="0" cellpadding="3">
<caption class="comment" style="caption-side: bottom"> 
   Popular Server HTTP header values</caption>
   <tr>
     <th>Encoding</th>
     <th>Quantity</th>
     <th>Percentage<br />overall</th>
     <th>Percentage using<br />HTTP header charset</th>
   </tr>
   <tr class="r1">
     <td>utf-8</td>
     <td class="num">318,351</td>
     <td class="num">9.1%</td>
     <td class="num">46.2%</td>
   </tr>
   <tr class="r2">
     <td>iso-8859-1</td>
     <td class="num">286,967</td>
     <td class="num">8.2%</td>
     <td class="num">41.7%</td>
   </tr>
   <tr class="r1">
     <td>windows-1251</td>
     <td class="num">32,154</td>
     <td class="num">0.9%</td>
     <td class="num">4.7%</td>
   </tr>
   <tr class="r2">
     <td>iso-8859-2</td>
     <td class="num">9,033</td>
     <td class="num">0.3%</td>
     <td class="num">1.3%</td>
   </tr>
   <tr class="r1">
     <td>iso-8859-15</td>
     <td class="num">4,476</td>
     <td class="num">0.1%</td>
     <td class="num">0.7%</td>
   </tr>
   <tr class="r2">
     <td>windows-1252</td>
     <td class="num">3,424</td>
     <td class="num">0.1%</td>
     <td class="num">0.5%</td>
   </tr>
   <tr class="r1">
     <td>us-ascii</td>
     <td class="num">3,228</td>
     <td class="num">0.1%</td>
     <td class="num">0.5%</td>
   </tr>
   <tr class="r2">
     <td>shift_jis</td>
     <td class="num">2,869</td>
     <td class="num">0.1%</td>
     <td class="num">0.4%</td>
   </tr>
   <tr class="r1">
     <td>[none/empty]</td>
     <td class="num">2,701</td>
     <td class="num">0.1%</td>
     <td class="num">0.4%</td>
   </tr>
   <tr class="r2">
     <td>euc-jp</td>
     <td class="num">2,589</td>
     <td class="num">0.1%</td>
     <td class="num">0.4%</td>
   </tr>
</table>

<h2>The <code class="skeyw">Server</code> HTTP header</h2>

<p>This is an interesting value to examine. The main story we see here illustrates
   a long-standing competition between the two most popular Web servers, Apache 
   and Microsoft&#39;s IIS. MAMA&#39;s numbers show the distribution heavily skewed in
   Apache&#39;s favor (67.7% as versus 25.9% for IIS). This balance does not match 
   <a href="http://news.netcraft.com/archives/2007/11/index.html">Netcraft&#39;s 
   numbers for the same time period</a>: Netcraft&#39;s data shows Apache as the 
   dominant Web server, but less so than in MAMA&#39;s case (Apache: 50.76%, IIS: 35.84%).</p>

<p>The URL set used in Rene Saarsoo&#39;s previous study of 
   <a href="http://triin.net/2006/06/12/HTTP_headers">&quot;Coding practices of Web pages&quot;</a> 
   shares a great deal of overlap with MAMA, and its HTTP header <code class="skeyw">Server</code> 
   field usage ratio is very similar to MAMA&#39;s. The main conclusion we can draw from 
   this is that the Dmoz URL set itself (which is MAMA&#39;s main URL source in this 
   study) has a slight bias towards Apache over the Web-at-large that Netcraft 
   appears to cover.</p>

<table cellspacing="0" cellpadding="3">
<caption class="comment" style="caption-side: bottom"> 
   Popular Server HTTP header values</caption>
   <tr>
     <th>Web<br />server</th>
     <th>Number<br />domains</th>
     <th>Percent<br />domains</th>
   </tr> 
   <tr class="r1">
     <td>Apache</td>
     <td class="num">2,011,088</td>
     <td class="num">67.7%</td>
   </tr>
   <tr class="r2">
     <td>Microsoft IIS</td>
     <td class="num">769,375</td>
     <td class="num">25.9%</td>
   </tr>
   <tr class="r1">
     <td>Other</td>
     <td class="num">189,275</td>
     <td class="num">6.4%</td>
   </tr>
</table>

<h2>The <code class="skeyw">Content-Length</code> HTTP header</h2>

<p>This header field, used in ~70% of MAMA&#39;s URLs, tells the requester exactly how 
   long the incoming document is. Does it tell the truth? Luckily, we have a way 
   to measure this. MAMA assessed the length of every document it analyzed by 
   using Perl&#39;s <code>length</code> function against the received content body. 
   Comparing these two values, MAMA finds that the <code class="skeyw">Content-Length</code> 
   values are rarely incorrect. If they are, they are only off by 1. Out of 
   2,533,890 URLs using the <code class="skeyw">Content-Length</code> HTTP header, 
   all were the same as MAMA&#39;s measured length value, except:</p> 

<table cellspacing="0" cellpadding="3">
<caption class="comment" style="caption-side: bottom"> 
   Comparison of MAMA&#39;s actual document length to the stated Content-Length HTTP header</caption>
   <tr>
     <th>Comparison condition</th>
     <th>Quantity</th>
   </tr> 
   <tr class="r1">
     <td><code class="skeyw">Content-Length</code> exceeded MAMA&#39;s count by 1</td>
     <td class="num">663</td>
   </tr>
   <tr class="r2">
     <td>MAMA&#39;s length exceeded <code class="skeyw">Content-Length</code> by 1</td>
     <td class="num">2</td>
   </tr>
   <tr class="r1">
     <td><code class="skeyw">Content-Length</code> value could not be compared to MAMA&#39;s length</td>
     <td class="num">58</td>
   </tr>
</table>

<h2>Summary</h2>
<p>It is very likely that the typical Web page author will have never seen the 
   HTTP headers with which their pages are served. Many of the common HTTP headers
   are the moral equivalent of boring paperwork that has little effect on the author. 
   However, authors should not make the mistake of simply dismissing them entirely&#8212; 
   they lay the groundwork for the document that follows. Some of the popular 
   header fields (like those influencing a document&#39;s caching and encoding behavior)
   directly influence the end-user&#39;s experience of the pages they&#39;ve spent so 
   much effort creating.</p>

      <p id="license" class="info">This article is licensed under a <a href="http://creativecommons.org/licenses/by-nc-sa/2.5/" rel="license">Creative Commons Attribution, Non Commercial - Share Alike 2.5</a> license.</p>

    </article>
<section id="comments">
  <h2>Comments</h2>
      <p class="info">The forum archive of this article is still available on <a href="http://my.opera.com/community/forums/topic.dml?id=255230">My Opera</a>.</p>
  <ul>
  </ul>
No new comments accepted.
</section>

  </section>

  <aside>
    <section class="info">
      <p class="author"><strong>Author</strong> <a href="../../../author/blooberry.html" rel="author">Brian Wilson</a></p>
      <p>
        <strong>Date</strong>
        Friday, October 31, 2008
      </p>

      <p class="tags"><strong>Tags</strong></p>
      <ul class="tags">
        <li><a href="../../tags/content-length.html" rel="tag">content-length</a></li>
        <li><a href="../../tags/content-type.html" rel="tag">content-type</a></li>
        <li><a href="../../tags/request.html" rel="tag">request</a></li>
        <li><a href="../../tags/response.html" rel="tag">response</a></li>
        <li><a href="../../tags/server.html" rel="tag">server</a></li>
      </ul>
    </section>
  </aside>




</section>
<script type="text/javascript" src="../../../../static.myopera.com/dev/js/highlight.pack.js"></script>
<script type="text/javascript">hljs.initHighlightingOnLoad();</script>

    <footer>
      <section role="contentinfo">
        <ul>
          <li><a href="../../../help.html">Help/<abbr>FAQ</abbr></a>
          <li><a href="http://my.opera.com/community/terms-of-service/?utm_source=devopera&amp;utm_medium=footer&amp;utm_campaign=devlinks">Terms of service</a>
          <li><a href="../../../privacy.html">Privacy</a>
        </ul>
      </section>
    </footer>
  </body>
</html>
