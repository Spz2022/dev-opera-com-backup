<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Opera Mini Widgets: an introductory tutorial - Dev.Opera</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="google-site-verification" content="L7q_7GF5c9d7ZAUYdfaTiRaB6sTAGv_cRz3nq5DsabM">
    <meta name="description" content="Dev.Opera is the ultimate source of distilled knowledge for web developers, covering the latest open web technologies and techniques including HTML5, CSS3, JavaScript, SVG, optimizing content for mobiles, tablets and TVs, and creating add-ons such as extensions and themes for the Opera browser.">
    <meta name="keywords" content="Opera, web, HTML5, HTML, CSS3, CSS, JavaScript, SVG, Geolocation, Widgets, Extensions, Unite, Mini, Mobile, web development, design, web design, tutorials, articles, examples, demos, web standards, open standards, open web, video, audio, getusermedia, accessibility, wai-aria, transitions, translations, microformats, microdata, dataset, media queries, viewport, @viewport, transparency, opacity, gradients, box-shadow, text-shadow, web fonts, appcache, websql, local storage, ajax, json, games, userjs, webgl, tv, tablet, emulator, skinning, themes, skins, drasgonfly, mathml, web sockets, operawatir">
    <link rel="icon" href="../../../../static.myopera.com/dev/img/speed_dial-icon.png" type="image/png">
    <link rel="apple-touch-icon" href="../../../../static.myopera.com/dev/img/touch-icon.png" type="image/png">
    <link rel="shortcut icon" href="../../../favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="../../../../static.myopera.com/dev/css/devopera.css" type="text/css">
    <!--[if IE 6]><link rel="stylesheet" href="/css/browsers/ie6.css" type="text/css"><![endif]-->
    <!--[if IE 7]><link rel="stylesheet" href="/css/browsers/ie7.css" type="text/css"><![endif]-->
    <!--[if IE 8]><link rel="stylesheet" href="/css/browsers/ie8.css" type="text/css"><![endif]-->
    <!--[if lte IE 8]><script type="text/javascript" src="/js/ie.js"></script><![endif]-->
    <link rel="stylesheet" href="../../../../static.myopera.com/dev/css/articles.css">
    <link rel="stylesheet" media="print" href="../../../../static.myopera.com/dev/css/print.css">
    <link rel="stylesheet" href="../../../../static.myopera.com/dev/css/github.css">
    <link rel="alternate" type="application/rss+xml" title="Recent articles - RSS 2.0 Feed" href="../../../feeds/rss/articles">
    <link rel="alternate" type="application/atom+xml" title="Recent articles - Atom 1.0 Feed" href="../../../feeds/atom/articles">
    <link rel="alternate" type="application/rss+xml" title="Recent articles in Mobile - RSS 2.0 Feed" href="../../../feeds/rss/articles/mobile">
    <link rel="alternate" type="application/atom+xml" title="Recent articles in Mobile - Atom 1.0 Feed" href="../../../feeds/atom/articles/mobile">
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script type="text/javascript" src="../../../../static.myopera.com/dev/js/menu.js"></script>
    <noscript>
      <style type="text/css">
.collection ul li ul {
    display: inherit !important;
}
      </style>
    </noscript>
    <script type="text/javascript">
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-4118503-4']);
_gaq.push(['_gat._anonymizeIp']);
_gaq.push(['_trackPageview']);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();
    </script>

  </head>
  <body class="mobile">
    <header role="banner"  class="article-view" >
      <div>
        <a href="../../../index.html" id="logo">Dev.Opera</a>
        <form action="http://dev.opera.com/search" role="search">
          <fieldset>
            <label class="hidden" for="q">Search</label>
            <input type="text" name="q" maxlength="256" value="" id="q" required>
            <input type="submit" id="q-submit" value="Search" title="Search">
          </fieldset>
        </form>
        <p id="login">
          <a href="../../../../../https/dev.opera.com/login/index.html" accesskey="L" title="Log in">Log in</a>
        </p>
        <nav id="nav">
          <ul role="menu">

            <li role="menuitem" >
              <a href="../../../web.html">Web</a>
            </li>
            <li role="menuitem" >
              <a href="../../../addons.1.html">Add-ons</a>
            </li>
            <li role="menuitem"  class="selected">
              <a href="../../../mobile.html">Mobile</a>
            </li>
            <li role="menuitem" >
              <a href="../../../tv.html">TV</a>
            </li>
            <li role="menuitem" >
              <a href="../../../labs.html">Labs</a>
            </li>
          </ul>
        </nav>
      </div>
    </header>
<section id="content" role="main" class="asideleft">
  <section class="main">
    <article lang="en">
      <h1>Opera Mini Widgets: an introductory tutorial</h1>
      <p class="print author">By Daniel Davis</p>

              <p class="note">Note: the ability to run Opera Mini widgets on your phone is a B2B product delivered only to Vodafone at this time.</p>

<h2>Introduction</h2>

<p>Opera Mini widgets - like web pages viewed in Opera Mini - are rendered on the server. In other words, when the user accesses a widget&#39;s URL, it&#39;s installed not on the client device but completely on the server. A small binary file is then sent to the user for viewing. This provides great performance benefits but from a developer&#39;s point of view, one of the trade-offs is that JavaScript support is slightly more limited than with client-side widgets and web applications. For this reason, it&#39;s best to develop a simple widget to start with and gradually add functionality for the best user experience.</p>

<p>Opera Mini widgets use the <a href="http://www.w3.org/TR/widgets/">W3C Widget Packaging and Configuration specification</a>, which means they can consist of HTML, CSS and JavaScript files, image files and other assets, and a configuration file in XML format. The only files that are essential in a widget are this configuration file, called <code>config.xml</code>, and a starting page, usually called <code>index.html</code>. All other files can be created and placed in directories as you wish, just as with a regular website, so the file structure of a typical widget will look something like figure 1:</p>

<p><img src="../../../../devfiles.myopera.com/articles/4482/Opera-Mini-Widgets_file-structure.png" alt="Opera Mini Widgets file structure" /></p>
<p class="comment">Figure 1: Opera Mini Widgets file structure.</p>

<p>In this tutorial, we&#39;re going to make a basic &quot;Hello, world!&quot; widget. Its functionality will be very simple but it will demonstrate how to create a flexible widget that will display nicely on a variety of screen sizes - an important consideration as internet-connected devices become more and more popular and varied. Our starting point will be the two essential widget files, as mentioned above.</p>

<h2>Your configuration file</h2>

<p>For our widget&#39;s configuration file, we can use the <a href="http://www.w3.org/TR/widgets/#example-configuration-document">example in the W3C specification</a> as a template. There are several non-essential items we can remove for simplicity, so, with a few details updated, we end up with this:</p>

<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;widget xmlns=&quot;http://www.w3.org/ns/widgets&quot;
  id=&quot;http://www.opera.com/exampleWidget&quot;
  version=&quot;1.0&quot;
  height=&quot;208&quot;
  width=&quot;176&quot;
  viewmodes=&quot;fullscreen&quot;&gt;

  &lt;name short=&quot;Example&quot;&gt;
    Example Widget
  &lt;/name&gt;

  &lt;description&gt;
    A simple example of an Opera Mini Widget.
  &lt;/description&gt;

  &lt;author href=&quot;http://www.opera.com/&quot;&gt;Opera Software&lt;/author&gt;

  &lt;icon src=&quot;images/icon_128.png&quot; width=&quot;128&quot; height=&quot;128&quot;/&gt;
  &lt;icon src=&quot;images/icon_64.png&quot; width=&quot;64&quot; height=&quot;64&quot;/&gt;
  &lt;icon src=&quot;images/icon_32.png&quot; width=&quot;32&quot; height=&quot;32&quot;/&gt;
  &lt;icon src=&quot;images/icon_16.png&quot; width=&quot;16&quot; height=&quot;16&quot;/&gt;
&lt;/widget&gt;</code></pre>

<p>As you can see, we have simply added details such as a name and description of the widget, as well as specifying an icon. In this case we&#39;re using a PNG file I created with the <a href="http://widgets.opera.com/widget/17371/">Icon Creator desktop widget</a>, although any graphics software could be used. You can also specify a number of icon sizes in descending order to ensure the best resolution is chosen for display.</p>

<p>When you are done with your configuation file, you should save it in an empty directory somewhere on your hard drive as <code>config.xml</code>.</p>

<p class="note">As part of our Widgets SDK we have an informative article on <a href="../custom-opera-widget-icons/index.html">how to create icons in different sizes</a>.</p>

<h2>Your starting page</h2>

<p>If you choose a name other than <code>index.html</code> for your starting page you must specify the name in the <code>config.xml</code> file using a <code>content</code> element, like so:

<pre><code>&lt;content src=&quot;start-page.html&quot;/&gt;</code></pre>

<p>Therefore, simply creating a file called <code>index.html</code> is recommended for simplicity. For simplicity we&#39;re going to use HTML5, but of course XHTML and HTML 4 are also acceptable. There is nothing special about this file - it&#39;s just a basic web page. As this is a gentle introduction, we&#39;re going to display a simple message to the user:</p>

<pre><code>&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
  &lt;meta charset=&quot;utf-8&quot;&gt;
  &lt;link rel=&quot;stylesheet&quot; href=&quot;style/HelloWorld.css&quot;&gt;
  &lt;title&gt;Hello World Widget&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;header&gt;
    &lt;h1&gt;Example Widget&lt;/h1&gt;
  &lt;/header&gt;
  &lt;div id=&quot;main&quot;&gt;
    &lt;p&gt;Hello, widget world!&lt;/p&gt;
  &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>

<p class="note">As we&#39;re working with client-side web languages, we can use a browser to test and debug our widget initially. This also gives us the advantage of being able to use Opera Dragonfly, which is a development tool built-in to the Opera desktop browser. Once we have a working widget we can then fine-tune it on a mobile device before packaging it.</p>

<p>When you are done with your index file, save it in the same directory as your <code>config.xml</code> file.</p>

<h2>Making it look like a widget</h2>

<p>At this stage we have the basis of a widget but we should add a bit of CSS magic to make it look more appealing and usable. This is no different to the CSS you use in your websites which means that, like a website, you have to adapt to a variety of screen sizes. One way to approach this is to create a stylesheet for a minimum expected resolution and then use JavaScript to detect the available screen size and consequently edit the necessary CSS styles.</p>

<p>Alternatively, if you want to avoid JavaScript you could use use CSS3 media queries, which apply certain styles depending on the user&#39;s screen. This is explained in detail in our article covering <a href="../cross-device-development-techniques-for/index.html#layout">cross-device development techniques</a>. In this example, however, we&#39;re going to continue to keep things simple and make our CSS as naturally adaptive as possible. Things to remember when doing this are:</p>

<ul>
  <li>Try to avoid using fixed font sizes. Use <code>em</code> values instead.</li>
  <li>Try to avoid using fixed values for width and height properties. Percentages are better.</li>
  <li>Avoid unnecessary images, particularly for buttons where a <code>button</code> element is better and can be styled to match your design.</li>
</ul>

<p>Based on this, here&#39;s a sample CSS file that should work well on any size of screen. See Figure 2 for a screenshot of how it actually looks on a mobile device:</p>

<pre><code>* {
  margin:0;
  padding:0;
}

body {
  background:#ccc;
  color:#000;
  font-family:helvetica, arial, sans-serif;
}

header {
  background:#789;
  border-bottom:solid 1px #333;
  color:#fff;
  display:block;
  padding:10px;
  text-shadow:0px -1px 1px #333;
}

#main {
  background:#fff;
  border:solid 1px #999;
  margin:10px;
  padding:10px;
}</code></pre>

<p><img src="../../../../devfiles.myopera.com/articles/4482/Opera-Mini-Widgets_css-only.png" alt="Our example widget before and after applying CSS." /></p>
<p class="comment">Figure 2: Our example widget before and after applying CSS.</p>

<p class="note">Note: you can put your stylesheet anywhere you like inside the Widget directory, but the preferred convention is to put it inside a <code>style</code> directory.</p>

<p>Download the widget so far: <a href="../../../../devfiles.myopera.com/articles/4482/HelloWorld_basic.wgt">HelloWorld_basic.wgt</a></p>

<h2>Adding some interactivity</h2>

<p>As good as HTML and CSS are, we want to make our Widget appear more interactive to our users, so we need to add some JavaScript. As mentioned earlier, there are some restrictions when pre-rendering widgets on a server but we are still able to use things like <code>onclick</code> and <code>onchange</code> events, <code>setInterval</code> timers and on-the-fly editing of styles and content. We&#39;ll use the latter in this example to create a button that shows an about page.</p>

<p>First, we&#39;ll continue editing our start page to add a button, some extra content and a link to the JavaScript file we&#39;re going to write - <code>index.html</code> now looks like this:</p>

<pre><code>&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
  &lt;meta charset=&quot;utf-8&quot;&gt;
  &lt;link rel=&quot;stylesheet&quot; href=&quot;style/HelloWorld.css&quot;&gt;
  &lt;script src=&quot;scripts/HelloWorld.js&quot;&gt;&lt;/script&gt;
  &lt;title&gt;Hello World Widget&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;header&gt;
    &lt;h1&gt;Example Widget&lt;/h1&gt;
    &lt;button id=&quot;btn_header&quot;&gt;About&lt;/button&gt;
  &lt;/header&gt;
  &lt;div id=&quot;main&quot;&gt;
    &lt;p&gt;Hello, widget world!&lt;/p&gt;
  &lt;/div&gt;
  &lt;div id=&quot;about&quot;&gt;
    &lt;p&gt;Created by &lt;a href=&quot;http://www.opera.com/&quot;&gt;Opera Software&lt;/a&gt;.&lt;/p&gt;
  &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>

<p>In our CSS, not only do we need to style the button so that it suits the design, but we should also hide the text in our about page. This will be displayed later with JavaScript when the user clicks the button. The latest version of <code>HelloWorld.css</code> looks like this:</p>

<pre><code>* {
  margin:0;
  padding:0;
}

body {
  background:#ccc;
  color:#000;
  font-family:helvetica, arial, sans-serif;
}

a {
  color:#c00;
}

header {
  background:#789;
  border-bottom:solid 1px #333;
  color:#fff;
  display:block;
  padding:10px;
  text-shadow:0px -1px 1px #333;
}

header h1 {
  display:inline;
}

#btn_header {
  background:#667;
  color:#fff;
  float:right;
  padding:0.1em;
  text-shadow:0px -1px 1px #333;
  width:4em;
}

#main, #about {
  background:#fff;
  border:solid 1px #999;
  margin:10px;
  padding:10px;
}

#main {
  display:block;
}

#about {
  display:none;
}</code></pre>

<p>The missing step is the JavaScript, so let&#39;s look at this bit by bit. Firstly, we get the relevant elements from the DOM:</p>

<pre><code>var main = document.getElementById(&#39;main&#39;);
var about = document.getElementById(&#39;about&#39;);
var btn_header = document.getElementById(&#39;btn_header&#39;);</code></pre>

<p>The next part is easy - we just add an event listener to the button that will fire a <code>flip()</code> function when it&#39;s clicked:</p>

<pre><code>btn_header.addEventListener(&#39;click&#39;, flip, false);</code></pre>

<p>Lastly we create the <code>flip()</code> function and use it to show and hide both the main page and the about page. To keep the code clean I&#39;ve made separate functions to display each page and change the text on the button:</p>

<pre><code>function showMain() {
  about.style.display = &#39;none&#39;;
  main.style.display = &#39;block&#39;;
  btn_header.textContent = &#39;About&#39;;
}

function showAbout() {
  about.style.display = &#39;block&#39;;
  main.style.display = &#39;none&#39;;
  btn_header.textContent = &#39;Back&#39;;
}

function flip() {
  if (main.currentStyle.display === &#39;block&#39;) {
    showAbout();
  } else {
    showMain();
  }
}</code></pre>

<p>Putting it all into a file which we&#39;ll call <code>HelloWorld.js</code> and making sure it executes after the widget has loaded, we have this:</p>

<pre><code>window.addEventListener(&#39;load&#39;, function() {
  var main = document.getElementById(&#39;main&#39;);
  var about = document.getElementById(&#39;about&#39;);
  var btn_header = document.getElementById(&#39;btn_header&#39;);
	
  function showMain() {
    about.style.display = &#39;none&#39;;
    main.style.display = &#39;block&#39;;
    btn_header.textContent = &#39;About&#39;;
  }
	
  function showAbout() {
    about.style.display = &#39;block&#39;;
    main.style.display = &#39;none&#39;;
    btn_header.textContent = &#39;Back&#39;;
  }
	
  function flip() {
    if (main.currentStyle.display === &#39;block&#39;) {
      showAbout();
    } else {
      showMain();
    }
  }
	
  btn_header.addEventListener(&#39;click&#39;, flip, false);
}, false);</code></pre>

<p class="=&quot;note&quot;">Note: As you may have guessed, the preferred convention for storing your scripts is to put them inside a <code>script</code> directory.</p>

<p><img src="../../../../devfiles.myopera.com/articles/4482/Opera-Mini-Widgets_about-page.png" alt="Our example widget showing the about page." /></p>
<p class="comment">Figure 3: Our example widget showing the about page.</p>

<p>Excellent! Figure 3 shows the about page of our widget, which now has a flexible design and basic interactivity. Our configuration file is ready so we can finally turn it into a widget. Packaging is straightforward - we just zip up the files and directories we have created and then rename the resulting file with a <code>.wgt</code> extension. Our widget is complete!</p>

<p>Download the finished widget here: <a href="../../../../devfiles.myopera.com/articles/4482/HelloWorld.wgt">HelloWorld.wgt</a> - try loading this article in Opera Mini and then following this link to see how it works in Opera Mini! Functionally, there is no difference between Opera Mini Widgets and any other W3C Widgets - it is just that the widgets are run on the server in the case of Mini, whereas they run on the client in other browsers.</p>

<p>If you are building up the widget yourself, now is the time to zip it up, change the file extension to <code>.wgt</code>, and test it out by making it available on the web somewhere, and pointing Opera Mini to its URL.</p>

<p class="note">Note: You need to make sure you zip up your widget so that the files and directories that comprise it are in the root of the zip, and not inside a folder. To ensure this, make sure that you zip up the files inside your widget directory, and not the directory itself. Subtle, but it makes all the difference.</p>

<h2>A word about the mobile development environment</h2>

<p>I suggested earlier developing the widget initially in a desktop version of Opera. While this is convenient, it is no substitute for testing on hardware actually running Opera Mini. For this, using Opera Unite as a temporary web server is extremely effective and saves time compared to uploading your files to an external server. The steps are as follows:</p>

<ol>
  <li>In the Opera desktop browser, start the <a href="http://unite.opera.com/application/192/">Opera Unite Web Server application</a>.</li>
  <li>In the <code>properties</code> dialog box, specify the local directory that contains your widget.</li>
  <li>Either set or remove the password for the web server, as you prefer.</li>
  <li>In the Opera Mini browser, open the web server URL. This can be found in the right-hand side of the web server admin page.</li>
  <li>Opera Mini should recognise the <code>config.xml</code> file in your development directory and automatically load your files as a widget. To see any changes you make, simply reload the page in Opera Mini as you normally would.</li>
</ol>

<h2>Summary</h2>

<p>I hope this has provided you with a foundation from which to develop, test and debug Opera Mini widgets. The example here is simple but demonstrates several key concepts, enabling you to use the example widget as a basic template to build upon and add features to. You can find many more tutorials and resources to help you on your way in the <a href="../opera-widgets-sdk/index.html">Opera Widgets SDK</a>.</p>
  </p>

      <p id="license" class="info">This article is licensed under a <a href="http://creativecommons.org/licenses/by-nc-sa/3.0/" rel="license">Creative Commons Attribution-Noncommercial-Share Alike 3.0 Unported</a> license.</p>

    </article>
<section id="comments">
  <h2>Comments</h2>
      <p class="info">The forum archive of this article is still available on <a href="http://my.opera.com/community/forums/topic.dml?id=825112">My Opera</a>.</p>
  <ul>
  </ul>
No new comments accepted.
</section>

  </section>

  <aside>
    <section class="info">
      <p class="author"><strong>Author</strong> <a href="../../../author/tagawa.html" rel="author">Daniel Davis</a></p>
      <p>
        <strong>Date</strong>
        Wednesday, December 1, 2010
      </p>

      <p class="tags"><strong>Tags</strong></p>
      <ul class="tags">
        <li><a href="../../tags/config.xml.html" rel="tag">config.xml</a></li>
        <li><a href="../../tags/configuration.html" rel="tag">configuration</a></li>
        <li><a href="../../tags/Opera&#32;Mini.html" rel="tag">Opera Mini</a></li>
        <li><a href="../../tags/operaminiwidgets.html" rel="tag">operaminiwidgets</a></li>
        <li><a href="../../tags/start&#32;page.html" rel="tag">start page</a></li>
        <li><a href="../../tags/tutorial.html" rel="tag">tutorial</a></li>
        <li><a href="../../tags/widget.html" rel="tag">widget</a></li>
        <li><a href="../../tags/widgets.html" rel="tag">widgets</a></li>
      </ul>
    </section>
  </aside>




</section>
<script type="text/javascript" src="../../../../static.myopera.com/dev/js/highlight.pack.js"></script>
<script type="text/javascript">hljs.initHighlightingOnLoad();</script>

    <footer>
      <section role="contentinfo">
        <ul>
          <li><a href="../../../help.html">Help/<abbr>FAQ</abbr></a>
          <li><a href="http://my.opera.com/community/terms-of-service/?utm_source=devopera&amp;utm_medium=footer&amp;utm_campaign=devlinks">Terms of service</a>
          <li><a href="../../../privacy.html">Privacy</a>
        </ul>
      </section>
    </footer>
  </body>
</html>
