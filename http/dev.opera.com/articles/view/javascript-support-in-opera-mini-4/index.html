<!DOCTYPE html>
<html lang="en">
  <head>
    <title>JavaScript support in Opera Mini 4 - Dev.Opera</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="google-site-verification" content="L7q_7GF5c9d7ZAUYdfaTiRaB6sTAGv_cRz3nq5DsabM">
    <meta name="description" content="Dev.Opera is the ultimate source of distilled knowledge for web developers, covering the latest open web technologies and techniques including HTML5, CSS3, JavaScript, SVG, optimizing content for mobiles, tablets and TVs, and creating add-ons such as extensions and themes for the Opera browser.">
    <meta name="keywords" content="Opera, web, HTML5, HTML, CSS3, CSS, JavaScript, SVG, Geolocation, Widgets, Extensions, Unite, Mini, Mobile, web development, design, web design, tutorials, articles, examples, demos, web standards, open standards, open web, video, audio, getusermedia, accessibility, wai-aria, transitions, translations, microformats, microdata, dataset, media queries, viewport, @viewport, transparency, opacity, gradients, box-shadow, text-shadow, web fonts, appcache, websql, local storage, ajax, json, games, userjs, webgl, tv, tablet, emulator, skinning, themes, skins, drasgonfly, mathml, web sockets, operawatir">
    <link rel="icon" href="../../../../static.myopera.com/dev/img/speed_dial-icon.png" type="image/png">
    <link rel="apple-touch-icon" href="../../../../static.myopera.com/dev/img/touch-icon.png" type="image/png">
    <link rel="shortcut icon" href="../../../favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="../../../../static.myopera.com/dev/css/devopera.css" type="text/css">
    <!--[if IE 6]><link rel="stylesheet" href="/css/browsers/ie6.css" type="text/css"><![endif]-->
    <!--[if IE 7]><link rel="stylesheet" href="/css/browsers/ie7.css" type="text/css"><![endif]-->
    <!--[if IE 8]><link rel="stylesheet" href="/css/browsers/ie8.css" type="text/css"><![endif]-->
    <!--[if lte IE 8]><script type="text/javascript" src="/js/ie.js"></script><![endif]-->
    <link rel="stylesheet" href="../../../../static.myopera.com/dev/css/articles.css">
    <link rel="stylesheet" media="print" href="../../../../static.myopera.com/dev/css/print.css">
    <link rel="stylesheet" href="../../../../static.myopera.com/dev/css/github.css">
    <link rel="alternate" type="application/rss+xml" title="Recent articles - RSS 2.0 Feed" href="../../../feeds/rss/articles">
    <link rel="alternate" type="application/atom+xml" title="Recent articles - Atom 1.0 Feed" href="../../../feeds/atom/articles">
    <link rel="alternate" type="application/rss+xml" title="Recent articles in Mobile - RSS 2.0 Feed" href="../../../feeds/rss/articles/mobile">
    <link rel="alternate" type="application/atom+xml" title="Recent articles in Mobile - Atom 1.0 Feed" href="../../../feeds/atom/articles/mobile">
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script type="text/javascript" src="../../../../static.myopera.com/dev/js/menu.js"></script>
    <noscript>
      <style type="text/css">
.collection ul li ul {
    display: inherit !important;
}
      </style>
    </noscript>
    <script type="text/javascript">
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-4118503-4']);
_gaq.push(['_gat._anonymizeIp']);
_gaq.push(['_trackPageview']);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();
    </script>

  </head>
  <body class="mobile">
    <header role="banner"  class="article-view" >
      <div>
        <a href="../../../index.html" id="logo">Dev.Opera</a>
        <form action="http://dev.opera.com/search" role="search">
          <fieldset>
            <label class="hidden" for="q">Search</label>
            <input type="text" name="q" maxlength="256" value="" id="q" required>
            <input type="submit" id="q-submit" value="Search" title="Search">
          </fieldset>
        </form>
        <p id="login">
          <a href="../../../../../https/dev.opera.com/login/index.html" accesskey="L" title="Log in">Log in</a>
        </p>
        <nav id="nav">
          <ul role="menu">

            <li role="menuitem" >
              <a href="../../../web.html">Web</a>
            </li>
            <li role="menuitem" >
              <a href="../../../addons.1.html">Add-ons</a>
            </li>
            <li role="menuitem"  class="selected">
              <a href="../../../mobile.html">Mobile</a>
            </li>
            <li role="menuitem" >
              <a href="../../../tv.html">TV</a>
            </li>
            <li role="menuitem" >
              <a href="../../../labs.html">Labs</a>
            </li>
          </ul>
        </nav>
      </div>
    </header>
<section id="content" role="main" class="asideleft">
  <section class="main">
    <article lang="en">
      <h1>JavaScript support in Opera Mini 4</h1>
      <p class="print author">By Chris Mills</p>

      <p class="note">DEPRECATED: This article is deprecated, and a newer article with updated information is available at <a href="../opera-mini-web-content-authoring-guidelines/index.html">Opera Mini: web content authoring guidelines</a>. You should read this one if you want updated information.</p>

<h2>Introduction</h2>

<p>Opera Mini is a very clever way of bringing the web to your mobile phone - it will work on most phone models, even low spec ones, as long as they will run a JVM. Basically, when you request a web page from Opera Mini, a request is sent to the Opera Mini servers. They retrieve the page, convert it into OBML (Opera Binary Markup Language,) a very compact binary markup format that reduces the page size by up to 90%, and then serve it to your phone.</p>

<p>This is all well and good for HTML and CSS content - the Opera Mini servers make a great job of interpreting the markup and styles and presenting them to Opera Mini in a usable format. But what about JavaScript? Here the story is not so simple - I will cover this topic in the following sections:</p>

<ol>
<li>How does Opera Mini interpret JavaScript?</li>
<li>Server-side support</li>
<li>Client-side support</li>
<li>Ajax support</li>
</ol>

<p>Note: Security is an important matter, which Opera takes very seriously. The connection between the Opera Mini client and server is always encrypted, whether the original site is HTTP or HTTPS, therefore you can trust Opera Mini to be secure.</p>

<p class="note">Visit our <a href="http://www.opera.com/mobile/">Opera Mini &amp; Opera Mobile</a> page for details and download instructions.</p>

<h2>How does Opera Mini interpret JavaScript?</h2>

<p>We need to consider where the JavaScript is executed - on the server, before the page loads, or after the page loads. The Opera Mini servers are based on the new Opera 9.5 rendering engine, which means that Opera Mini has full support for server-side JavaScript (ECMAScript 3.) </p>

<p>On the client-side, however, support is limited by the hardware limitations of the handsets; therefore the Opera Mini client itself only supports a limited subset of JavaScript, which means:</p>

<ol>
<li>Limited support for DOM events</li> 
<li>No background scripting</li> 
<li>Very limited Ajax support</li>
</ol>

<p>We&#39;ll look at this in more detail in the sections below.</p>

<h2>Server-side support</h2>

<p>As mentioned above, the Opera Mini servers are based on the brand new Opera 9.5 rendering engine, which means that all scripts executed before a page is fully loaded will work as expected when your page is loaded in Opera Mini. This includes manipulation of elements in the DOM tree. Furthermore, the body-element&#39;s <code>onLoad</code> event is fired and its code executed server-side before the page is transferred to the client. </p>

<p>The only caveat to consider here is that we don&#39;t allow scripts to run for more than a second or two once the page has finished loading, and will not allow any scripts to run before the user does some kind of user interaction (such as click a link or submit a form) - therefore <code>interval()</code> and <code>delay()</code> are disabled. The same is true for xmlrpc requests - they work but are only allowed to run for a few seconds. Once the page is sent to the client, all scripts are stopped.</p>

<h2>Client-side support</h2>

<p>After the page has been transferred to the client, things are a lot more limited - basically all events are processed on the server. The client does absolutely no JavaScript processing at all, and instead the page is kept in the server (basically the client works as an input device for the opera running in the server). No background scripts running after the page is loaded will be executed, and executing code using <code>setTimeout</code> is not possible. </p>

<p>The supported events are as follows:</p>

<ol>
<li>Loading: normal event processing is done for <code>onLoad</code> and <code>onUnload</code>.</li>
<li>Forms:
	<ol><li><code>onSubmit</code></li>
	<li><code>onChange</code>: this even works during filling out a form, not just on submitting the entire form. For example, if you have 2 form fields, &quot;Select Country&quot; and &quot;Select State/Region,&quot; and the second one changes depending on the country you selected in the first one, Opera Mini will reload to display this change</li>
	<li><code>onClick</code> on buttons (bear in mind that events will only be fired when the form is finally submitted, not while it&#39;s being edited in the client, therefore <code>onFocus</code> would not work)</li></ol>
</li>
<li>Clicks: <code>onClick</code> is implemented as a mouse motion to the coordinate being clicked (<code>onMouseEnter</code>, <code>onMouseOver</code>, <code>onMouseLeave</code> etc) followed by <code>onMouseDown</code> followed by <code>onMouseUp</code> and finally <code>onClick</code>.</li>
</ol>

<p>All other events are ignored/not applicable, for example:</p>

<ol>
<li>key/mouse events (<code>onMouseOver/-Out/-Down/-Up</code>, <code>onKeyDown/-KeyPress</code>)</li>
<li>focus events (<code>onBlur</code>, <code>onFocus</code>, as mentioned above)</li>
</ol>

<p>This sounds limiting, but there is another point to consider - Opera Mini can execute JavaScript on the server if it&#39;s triggered by the JavaScript events listed above in the client, so some complex pages work surprisingly well - for instance Facebook is able to display popup menus and popup dialogs very well on Opera Mini. </p>

<h2>Ajax Support</h2>

<p>Given handset limitations and Opera Mini&#39;s client-server architecture, &quot;Ajax&quot; applications cannot be expected to work as expected on Opera Mini. <code>XMLHttpRequest</code> is supported, therefore many &quot;Ajax&quot; sites will function pretty well, for example iGoogle (you can&#39;t move boxes around, but you can add and delete them, and change themes,) and GMail (this mostly works, although you don&#39;t get new mails appearing automatically.)</p>

<p>Sites that use Ajax to trigger very regular page changes however, such as Google Suggest and the automatic new mail functionality of GMail mentioned above won&#39;t work. Other examples of things that don’t work are IRC-like chat-clients using server-side events, and clocks.</p>

<p>As mentioned above, client-side events are basically limited to form changes (<code>onChange</code> and <code>onClick</code>) and clicking (<code>onClick</code>, links, submits etc, basically everything you can do clicking with a mouse,) so things that react to user input (clicking, or changing form values) usually work, unless they need to see each individual character inputted (eg Google Suggest,) or react to changing state in the outside world (eg new mail, new text message, end of the world, the time etc.)</p>

<p>What it all boils down to is that once a page has been rendered by the server it won&#39;t change until the user clicks something.</p>

      <section id="author-info">
        <h1><a href="../../../author/chrismills.html" rel="author">Chris Mills</a></h1>
        <a href="../../../author/chrismills.html" rel="author"><img src="../../../../../https/static.myopera.com/avatars/pool1/49/546/4272683e28ab456dc962e131580e44990be.jpg" alt=""/></a>
        <p>Chris Mills is a web technologist, open standards evangelist and education agitator, currently working at Opera Software in the developer relations team. He spends most of his time writing articles about web standards for dev.opera.com and other publications (such as .net mag and A List Apart), giving talks at universities and industry conferences, and lobbying universities to improve their web education courses. He believes that education is the answer to everything, but in particular he is passionate about using education to improve the overall content quality, accessibility, usability and future-viability of the Web. <br/><br/>He is the creator of the Opera Web standards curriculum, contributor to the WaSP InterACT project, and coauthor of InterACT with web standards: A Holistic Approach to Web Design. In August 2011, he also accepted the position of co-chair of the newly-formed Web Education Community Group. <br/><br/>Outside work he is a heavy metal drummer, proud father of three and lover of good beer.</p>
        <br class="clear" />
      </section>
      <p id="license" class="info">This article is licensed under a <a href="http://creativecommons.org/licenses/by-nc-sa/2.5/" rel="license">Creative Commons Attribution, Non Commercial - Share Alike 2.5</a> license.</p>

    </article>
<section id="comments">
  <h2>Comments</h2>
      <p class="info">The forum archive of this article is still available on <a href="http://my.opera.com/community/forums/topic.dml?id=210373">My Opera</a>.</p>
  <ul>
  </ul>
No new comments accepted.
</section>

  </section>

  <aside>
    <section class="info">
      <p class="author"><strong>Author</strong> <a href="../../../author/chrismills.html" rel="author">Chris Mills</a></p>
      <p>
        <strong>Date</strong>
        Thursday, October 25, 2007
      </p>

      <p class="tags"><strong>Tags</strong></p>
      <ul class="tags">
        <li><a href="../../tags/4.html" rel="tag">4</a></li>
        <li><a href="../../tags/deprecated.html" rel="tag">deprecated</a></li>
        <li><a href="../../tags/javascript.html" rel="tag">javascript</a></li>
        <li><a href="../../tags/mini.html" rel="tag">mini</a></li>
        <li><a href="../../tags/mini4.html" rel="tag">mini4</a></li>
        <li><a href="../../tags/opera.html" rel="tag">opera</a></li>
        <li><a href="../../tags/support.html" rel="tag">support</a></li>
      </ul>
    </section>
  </aside>




</section>
<script type="text/javascript" src="../../../../static.myopera.com/dev/js/highlight.pack.js"></script>
<script type="text/javascript">hljs.initHighlightingOnLoad();</script>

    <footer>
      <section role="contentinfo">
        <ul>
          <li><a href="../../../help.html">Help/<abbr>FAQ</abbr></a>
          <li><a href="http://my.opera.com/community/terms-of-service/?utm_source=devopera&amp;utm_medium=footer&amp;utm_campaign=devlinks">Terms of service</a>
          <li><a href="../../../privacy.html">Privacy</a>
        </ul>
      </section>
    </footer>
  </body>
</html>
