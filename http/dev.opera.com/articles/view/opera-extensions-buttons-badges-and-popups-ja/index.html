<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Opera エクステンション：ボタン、バッヂ、ポップアップ - Dev.Opera</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="google-site-verification" content="L7q_7GF5c9d7ZAUYdfaTiRaB6sTAGv_cRz3nq5DsabM">
    <meta name="description" content="Dev.Opera is the ultimate source of distilled knowledge for web developers, covering the latest open web technologies and techniques including HTML5, CSS3, JavaScript, SVG, optimizing content for mobiles, tablets and TVs, and creating add-ons such as extensions and themes for the Opera browser.">
    <meta name="keywords" content="Opera, web, HTML5, HTML, CSS3, CSS, JavaScript, SVG, Geolocation, Widgets, Extensions, Unite, Mini, Mobile, web development, design, web design, tutorials, articles, examples, demos, web standards, open standards, open web, video, audio, getusermedia, accessibility, wai-aria, transitions, translations, microformats, microdata, dataset, media queries, viewport, @viewport, transparency, opacity, gradients, box-shadow, text-shadow, web fonts, appcache, websql, local storage, ajax, json, games, userjs, webgl, tv, tablet, emulator, skinning, themes, skins, drasgonfly, mathml, web sockets, operawatir">
    <link rel="icon" href="../../../../static.myopera.com/dev/img/speed_dial-icon.png" type="image/png">
    <link rel="apple-touch-icon" href="../../../../static.myopera.com/dev/img/touch-icon.png" type="image/png">
    <link rel="shortcut icon" href="../../../favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="../../../../static.myopera.com/dev/css/devopera.css" type="text/css">
    <!--[if IE 6]><link rel="stylesheet" href="/css/browsers/ie6.css" type="text/css"><![endif]-->
    <!--[if IE 7]><link rel="stylesheet" href="/css/browsers/ie7.css" type="text/css"><![endif]-->
    <!--[if IE 8]><link rel="stylesheet" href="/css/browsers/ie8.css" type="text/css"><![endif]-->
    <!--[if lte IE 8]><script type="text/javascript" src="/js/ie.js"></script><![endif]-->
    <link rel="stylesheet" href="../../../../static.myopera.com/dev/css/articles.css">
    <link rel="stylesheet" media="print" href="../../../../static.myopera.com/dev/css/print.css">
    <link rel="stylesheet" href="../../../../static.myopera.com/dev/css/github.css">
    <link rel="alternate" type="application/rss+xml" title="Recent articles - RSS 2.0 Feed" href="../../../feeds/rss/articles">
    <link rel="alternate" type="application/atom+xml" title="Recent articles - Atom 1.0 Feed" href="../../../feeds/atom/articles">
    <link rel="alternate" type="application/rss+xml" title="Recent articles in Add-ons - RSS 2.0 Feed" href="../../../feeds/rss/articles/addons">
    <link rel="alternate" type="application/atom+xml" title="Recent articles in Add-ons - Atom 1.0 Feed" href="../../../feeds/atom/articles/addons">
    <link rel="alternate" type="application/rss+xml" title="Recent articles in Opera 11-12 extensions - RSS 2.0 Feed" href="../../../feeds/rss/articles/addons/extensions">
    <link rel="alternate" type="application/atom+xml" title="Recent articles in Opera 11-12 extensions - Atom 1.0 Feed" href="../../../feeds/atom/articles/addons/extensions">
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script type="text/javascript" src="../../../../static.myopera.com/dev/js/menu.js"></script>
    <noscript>
      <style type="text/css">
.collection ul li ul {
    display: inherit !important;
}
      </style>
    </noscript>
    <script type="text/javascript">
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-4118503-4']);
_gaq.push(['_gat._anonymizeIp']);
_gaq.push(['_trackPageview']);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();
    </script>

  </head>
  <body class="extensions">
    <header role="banner"  class="article-view" >
      <div>
        <a href="../../../index.html" id="logo">Dev.Opera</a>
        <form action="http://dev.opera.com/search" role="search">
          <fieldset>
            <label class="hidden" for="q">Search</label>
            <input type="text" name="q" maxlength="256" value="" id="q" required>
            <input type="submit" id="q-submit" value="Search" title="Search">
          </fieldset>
        </form>
        <p id="login">
          <a href="../../../../../https/dev.opera.com/login/index.html" accesskey="L" title="Log in">Log in</a>
        </p>
        <nav id="nav">
          <ul role="menu">

            <li role="menuitem" >
              <a href="../../../web.html">Web</a>
            </li>
            <li role="menuitem"  class="selected">
              <a href="../../../addons.1.html">Add-ons</a>
            </li>
            <li role="menuitem" >
              <a href="../../../mobile.html">Mobile</a>
            </li>
            <li role="menuitem" >
              <a href="../../../tv.html">TV</a>
            </li>
            <li role="menuitem" >
              <a href="../../../labs.html">Labs</a>
            </li>
          </ul>
        </nav>
      </div>
      <nav id="subnav">
        <ul role="menu">
            <li role="menuitem"  class="selected">
              <a href="../../../addons/extensions/index.html">Opera 11-12 extensions</a>
            </li>
            <li role="menuitem" >
              <a href="http://dev.opera.com/extension-docs/">Opera 15+ extensions</a>
            </li>
            <li role="menuitem" >
              <a href="../../../addons/themes.html">Themes</a>
            </li>
        </ul>
      </nav>
    </header>
<section id="content" role="main" class="asideleft">
  <section class="main">
    <article lang="ja">
      <h1>Opera エクステンション：ボタン、バッヂ、ポップアップ</h1>
      <p class="print author">By t.ashula</p>

      <p class="note">
From Opera 15 onward, Opera 11 &amp; 12’s extension format is no longer supported, and instead, we’ve switched to Chromium’s extension model. <strong>Check out <a href="http://dev.opera.com/extension-docs/">our new documentation for developing extensions for Opera 15 and higher</a></strong> and start building your own extensions.
</p>

	    <h2>
	      はじめに</h2>
	    <p>この文書ではツールバー上のボタンの作り方やその構成について端から端まで全て解説していきます。ツールバー上のアイテムはバックグラウンドプロセスの一部として定義したり操作したりします。挿入されたスクリプトやポップアップから直接定義したり操作したりはできません。ボタンやバッヂ、ポップアップは <code>opera.coontexts.toolbar</code> に制御されますがこれについての詳細は、<a href="../extensions-api-browser-toolbar/index.html">Button &amp; Badge API Guide</a> を参照してください。</p>
	    <h2>
	      目次</h2>
	    <ul>
	      <li>
		<a href="index.html#toolbar_buttons">
		  ツールバーのボタン</a></li>
	      <li>
		<a href="index.html#create_buttons">
		  ボタンを作る</a></li>
	      <li>
		<a href="index.html#adding_button">
		  ボタンをツールバーに追加する</a></li>
	      <li>
		<a href="index.html#remove_button">
		  ボタンをツールバーから削除する</a></li>
	      <li>
		<a href="index.html#create_popup">
		  ポップアップを作る</a></li>
	      <li>
		<a href="index.html#popup_contents">
		  ポップアップの中身</a></li>
	      <li>
		<a href="index.html#popup_dimensions">
		  ポップアップのサイズ</a></li>
	      <li>
		<a href="index.html#creating_badge">
		  バッヂを作る</a></li>
	      <li>
		<a href="index.html#display_badge">
		  バッヂの表示</a></li>
	      <li>
		<a href="index.html#api">
		  API リファレンス</a></li></ul>
	    <h2 id="toolbar_buttons">
	      ツールバーのボタン</h2>
	    <p>
	      ツールバーの検索欄の右側にエクステンション一つに付きボタンを一つ置けて、18x18 ピクセルのアイコンや、マウスを乗せた時に表示するツールチップ、ステータス表示用のバッヂ、オーバーレイ表示されるポップアップを入れられます。</p>
	    <h2 id="create_buttons">
	      ボタンを作る</h2>
	    <p>
	      ボタンは、<code>index.html</code> にスクリプトを書いて作成します。
	      この例では、ロードイベント発生時に動作させることを想定して書いていきます。</p>
	    <p>
	      まずは、ボタンのプロパティを設定します。設定した <code>ToolbarUIItemProperties</code> オブジェクトを以下に示します。</p>
	    <pre><code>
var ToolbarUIItemProperties = {
  disabled: false,
  title: &quot;Button Example&quot;,
  icon: &quot;icons/button.png&quot;
}</code></pre>
	    <p>
	      <code>ToolbarUIItemProperties</code> オブジェクトにボタンのプロパティを定義したら、<code>createItem</code> 関数を使って実際のボタンを生成します。
	    <pre><code>var theButton = opera.contexts.toolbar.createItem(ToolbarUIItemProperties);</code></pre>
	    <p>
	       <code>ToolbarUIItemProperties</code> にはこれから挙げる 5個のプロパティを設定することが出来ます。</p>
	    <h3>
	      disabled</h3>
	    <p>
	      ボタンの有効無効状態を真偽値で設定します。デフォルトでは false （有効） になっています。
	      ボタンを無効にするには、以下のようにします。</p>
	    <pre><code>theButton.disabled = true;</code></pre>
	    <h3>
	      title</h3>
	    <p>
	      title にはマウスを乗せた時のツールチップに表示される文字列を設定します。</p>
	    <pre><code>theButton.title = &quot;This is a tooltip&quot;;</code></pre>
	    <h3>
	      icon</h3>
	    <p>
	      icon にはボタンのアイコンに使われる画像を指定します。
	      画像のサイズが 18x18 ピクセル以外のとき、自動的にサイズが調整されます。</p>
	    <pre><code>theButton.icon = &quot;icons/beautiful-toobar-icon.png&quot;;</code></pre>
	    <h3>
	      onclick</h3>
	    <p>
	      ユーザがボタンをクリックして <code>click</code> イベントが発生したときに実行される関数を指定します。</p>
	    <pre><code>theButton.onclick = function(){ /* do something */ };</code></pre>
	    <h3>
	      onremove</h3>
	    <p>
	      <code>ToolbarContext</code> から削除されて、<code>remove</code> イベントが発生したときに実行される関数を指定します。</p>
	    <pre><code>theButton.onremove = function(){ /* do something */ };</code></pre>
	    <h2 id="adding_button">
	      ツールバーにボタンを追加する</h2>
	    <p>
	      ボタンを作ったならツールバーに追加してみましょう。追加するには <code>addItem</code> 関数を使います。</p>
	    <pre><code>opera.contexts.toolbar.addItem(theButton);</code></pre>
	    <p>
	      ボタンに動作を何も設定していないので何も起きませんが、<a href="../../../../devfiles.myopera.com/articles/4252/example-button-ja.oex">ボタンのサンプル実装</a>を実行して試してみてください。</p>
	    <h2 id="remove_button">
	      ツールバーからボタンを削除する</h2>
	    <p>
	      以下のように <code>removeItem</code> 関数を使ってボタンをツールバーから削除することも出来ます。</p>
	    <pre><code>opera.contexts.toolbar.removeItem(theButton);</code></pre>
	    <h2 id="create_popup">
	      ポップアップをつくる</h2>
	    <p>
	      ボタンができたので実際に何か動作させてみましょう。
	      ユーザがボタンをクリックしたときに、ポップアップを指定したサイズでオーバーレイ表示させることが出来ます。
	      ポップアップで表示させる内容は、どこかの Web ページか、エクステンションに同梱したページかを指定します。</p>
	    <p>
	      ポップアップを作るには、<code>ToolbarUIItemProperties</code> オブジェクトのプロパティに <code>Popup</code> オブジェクトを追加します。</p>
	    <pre><code>
var ToolbarUIItemProperties = {
  disabled: false,
  title: &quot;Button Example&quot;,
  icon: &quot;icons/button.png&quot;,<strong>
  popup: {
    href: &quot;popup.html&quot;,
    width: 300,
    height: 300
  }</strong>
}</code></pre>
            <p>
              ポップアップの高さと幅はデフォルトで 300x300 になっているので、別の大きさにしたい時にはこの例のように、明示的に width と height を指定する必要があります。</p>
	    <h2 id="popup_contents">
	      ポップアップの内容</h2>
	    <p>
	      ポップアップの内容は <code>href</code> プロパティで表示させるページを指定します。
	      次のように絶対 URL を指定することで、どんな Web ページもポップアップさせることが出来ます。</p>
	    <pre><code>theButton.popup.href = &quot;<a href="http://www.opera.com/" target="_blank">http://www.opera.com/</a>&quot;;</code></pre>
	    <p>
	      エクステンションに同梱したファイルを相対パスで指定するには次のようにします。</p>
	    <pre><code>theButton.popup.href = &quot;popup.html&quot;;</code></pre>
	    <p>
	      ポップアップに表示させるページは普通の HTML のページであれば、他に何も要りません。
	      ポップアップを表示させているときに <code>href</code> プロパティを変更すると、ポップアップは閉じられます。</p>
	    <h2 id="popup_dimensions">
	      ポップアップのサイズ</h2>
	    <p>
	      ポップアップのサイズは <code>width</code> と <code>height</code> プロパティにピクセル数で指定します。</p>
	    <dl>
	      <dt>幅</dt><dd><pre><code>theButton.popup.width = 300;</code></pre></dd>
	      <dt>高さ</dt><dd><pre><code>theButton.popup.height = 300;</code></pre></dd></dl>
	    <p>
	      ポップアップは<code>createItem</code> 関数を呼び出したときにボタンと一緒に作られます。</p>
	    <p>
	      <a href="../../../../devfiles.myopera.com/articles/4252/example-button-popup-ja.oex">ポップアップのサンプル実装</a>を実行して試してみてください。
	      <a href="../opera-extensions-hello-world-ja/index.html">Opera エクステンションで Hello World!</a>（原典:<a href="../opera-extensions-hello-world/index.html">Saying hello world to Opera extensions!</a>）を試したことがあれば、非常によく似たエクステンションだと思うことでしょう。</p>
	    <h2 id="creating_badge">
	      バッヂを作る</h2>
	    <p>
	      バッチはアイコンにオーバーレイして状態を示すものです。
	      例えば、未読のメールやメッセージといったアイテムの数を表示させるのによく使われます。
	      バッヂを作るには、<code>ToolbarUIItemProperties</code> オブジェクトのプロパティに <code>Badge</code> オブジェクトを追加します。</p>
	    <pre><code>
var ToolbarUIItemProperties = {
  disabled: false,
  title: &quot;Button Example&quot;,
  icon: &quot;icons/button.png&quot;,<strong>
  badge: {
    display: &quot;block&quot;,
    textContent: &quot;12&quot;,
    color: &quot;white&quot;,
    backgroundColor: &quot;rgba(211, 0, 4, 1)&quot;
  }</strong>
}</code></pre>
	    <h2 id="display_badge">
	      バッヂの表示
	      </h2>
	    <p>
	      バッヂのカスタマイズには以下の4個のプロパティを使います。</p>
	    <h3>
	      display</h3>
	    <p>
	      バッヂの表示非表示は <code>display</code> プロパティで切り替えます。
	      指定できる値は、<code>block</code> か <code>none</code> で、デフォルト値は <code>none</code> になっています。
	      バッヂを表示させるには、次のようにします。</p>
	    <pre><code>theButton.badge.display = &quot;block&quot;;</code></pre>
	    <h3>
	      textContent</h3>
	    <p>
	      バッヂとして表示させる内容は <code>textContent</code> プロパティに指定します。
	      表示領域が限られているので簡潔にしましょう。</p>
	    <pre><code>theButton.badge.textContent = &quot;12&quot;;</code></pre>
	    <h3>
	      color と backgroundColor</h3>
	    <p>
	      バッヂの文字（前景）色と背景色はそれぞれ <code>color</code> と <code>backgroundColor</code> プロパティで指定します。
	      指定方法には、16進数表記と <code>rgba()</code>、色名が使えます。</p>
	    <pre><code>theButton.badge.color = &quot;white&quot;;</code></pre>
	    <pre><code>theButton.badge.backgroundColor: = &quot;rgba(211, 0, 4, 1)&quot;;</code></pre>
	    <p>
	      <a href="../../../../devfiles.myopera.com/articles/4252/button-badge-popup-ja.oex">バッヂのサンプル実装</a>を実行して試したり、エクステンションの UI のいろいろな生成方法と操作方法を試してみるといいでしょう。</p>
	    <p>
	      数々のオブジェクトや関数の完全なドキュメントは <a href="../../../addons/extensions/index.html#apireference">Opera extensions API documentation</a> を参照してください。</p></p>

      <p id="license" class="info">This article is licensed under a <a href="http://creativecommons.org/licenses/by/3.0/" rel="license">Creative Commons Attribution 3.0 Unported</a> license.</p>

    </article>
<section id="comments">
  <h2>Comments</h2>
      <p class="info">The forum archive of this article is still available on <a href="http://my.opera.com/community/forums/topic.dml?id=1071822">My Opera</a>.</p>
  <ul>
  </ul>
No new comments accepted.
</section>

  </section>

  <aside>
    <section class="info">
      <p class="author"><strong>Author</strong> <a href="../../../author/dstorey.html" rel="author">David Storey</a></p>
      <p class="author"><strong>Translator</strong> <a href="../../../author/t-ashula.html" rel="author">t.ashula</a></p>
      <p>
        <strong>Date</strong>
        Thursday, August 11, 2011
      </p>

      <p class="tags"><strong>Tags</strong></p>
      <ul class="tags">
        <li><a href="../../tags/badges.html" rel="tag">badges</a></li>
        <li><a href="../../tags/buttons.html" rel="tag">buttons</a></li>
        <li><a href="../../tags/extensions.html" rel="tag">extensions</a></li>
        <li><a href="../../tags/japanese.html" rel="tag">japanese</a></li>
        <li><a href="../../tags/javascript.html" rel="tag">javascript</a></li>
        <li><a href="../../tags/opera&#32;extensions.html" rel="tag">opera extensions</a></li>
        <li><a href="../../tags/popups.html" rel="tag">popups</a></li>
      </ul>
      <p><strong>Languages</strong>
        <a href="../opera-extensions-buttons-badges-and-popups/index.html">English</a>,
        <a href="../opera-extensions-buttons-badges-and-popups-ru/index.html">Russian</a>
      </p>
    </section>
  </aside>




</section>
<script type="text/javascript" src="../../../../static.myopera.com/dev/js/highlight.pack.js"></script>
<script type="text/javascript">hljs.initHighlightingOnLoad();</script>

    <footer>
      <section role="contentinfo">
        <ul>
          <li><a href="../../../help.html">Help/<abbr>FAQ</abbr></a>
          <li><a href="http://my.opera.com/community/terms-of-service/?utm_source=devopera&amp;utm_medium=footer&amp;utm_campaign=devlinks">Terms of service</a>
          <li><a href="../../../privacy.html">Privacy</a>
        </ul>
      </section>
    </footer>
  </body>
</html>
